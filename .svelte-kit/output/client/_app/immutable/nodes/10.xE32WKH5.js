import"../chunks/DsnmJJEf.js";import"../chunks/luk3gl1z.js";import{o as Jt}from"../chunks/_gNL4IXV.js";import{B as Ja,S as Yt,aR as es,aW as as,l as ts,R as ss,a6 as rs,X as is,a7 as ls,a9 as ns,_ as os,a8 as cs,ab as ds,p as us,o as vs,q as ps,f as N,t as P,d as l,s,g as e,b as g,c as ms,m as b,e as d,A as q,r as i,x as ye,y as gs,n as we,u as v,h as ie,v as Ya,w as et,a as at}from"../chunks/CwLoShKX.js";import{e as _,s as y}from"../chunks/D8bngpjW.js";import{i as E}from"../chunks/WMMc_YU6.js";import{e as ke,i as tt}from"../chunks/ThBeqclG.js";import{r as j,s as Se,a as bs,b as st}from"../chunks/CkmYFb5S.js";import{b as H,a as fs}from"../chunks/DGOQ8hUW.js";import{b as Ce,i as xs,s as _s}from"../chunks/COJT2EDT.js";import{p as hs,s as ys}from"../chunks/CdEA5IGF.js";import{i as ws}from"../chunks/Ccxz8Bhd.js";import{x as ks,y as Ss,z as Cs,A as rt,B as Ps,C as Pe,D as Ns,E as Ls}from"../chunks/Q6rjOpry.js";import{t as S,a as O}from"../chunks/wZ8Uf4_x.js";function Ms(Ne,Le,A){Ja&&Yt();var T=Ne,L=cs,w,M,k=null,z=es()?as:ts;function R(){w&&ds(w),k!==null&&(k.lastChild.remove(),T.before(k),k=null),w=M}ss(()=>{if(z(L,L=Le())){var B=T,de=ns();de&&(k=document.createDocumentFragment(),k.append(B=rs())),M=is(()=>A(B)),de?ls.add_callback(R):R()}}),Ja&&(T=os)}var Is=N("<option> </option>"),Es=N('<div class="flex items-center gap-2"><img alt="preview" class="h-10 w-10 object-cover rounded-lg ring-1 ring-slate-200"/> <button type="button" class="text-xs text-rose-600 hover:underline">Quitar</button></div>'),js=ie('<svg class="h-4 w-4 animate-spin" viewBox="0 0 24 24" fill="none"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 0 1 8-8v3a5 5 0 0 0-5 5H4z"></path></svg> Creando…',1),zs=N('<img class="h-full w-full object-cover"/>'),Us=N('<div class="grid h-full place-items-center text-slate-400 text-sm">Sin imagen</div>'),As=N('<span class="rounded-full bg-slate-900/80 text-white text-[11px] px-2 py-0.5">Inactivo</span>'),Rs=ie('<svg class="h-3.5 w-3.5 animate-spin" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-opacity=".25" stroke-width="3"></circle><path d="M21 12a9 9 0 0 1-9 9" stroke="currentColor" stroke-width="3" stroke-linecap="round"></path></svg> Eliminando…',1),Bs=ie('<svg viewBox="0 0 24 24" class="h-4 w-4" fill="currentColor" aria-hidden="true"><path d="M9 3h6a1 1 0 0 1 1 1v1h4v2H4V5h4V4a1 1 0 0 1 1-1Zm1 6h2v9h-2V9Zm5 0h2v9h-2V9ZM7 9h2v9H7V9Z"></path></svg> Eliminar',1),Ds=ie('<svg class="h-3.5 w-3.5 animate-spin text-slate-500" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-opacity=".25" stroke-width="3"></circle><path d="M21 12a9 9 0 0 1-9 9" stroke="currentColor" stroke-width="3" stroke-linecap="round"></path></svg>'),$s=ie('<svg class="h-3.5 w-3.5 animate-spin text-slate-400" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-opacity=".25" stroke-width="3"></circle><path d="M21 12a9 9 0 0 1-9 9" stroke="currentColor" stroke-width="3" stroke-linecap="round"></path></svg>'),Os=N('<span class="text-xs font-semibold text-slate-900"> </span>'),Ts=ie('<svg class="h-3.5 w-3.5 animate-spin text-slate-400" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-opacity=".25" stroke-width="3"></circle><path d="M21 12a9 9 0 0 1-9 9" stroke="currentColor" stroke-width="3" stroke-linecap="round"></path></svg>'),Gs=N('<span class="rounded-full bg-rose-50 px-2 py-0.5 text-[11px] text-rose-700 ring-1 ring-rose-100">Sin stock</span>'),Fs=N('<span class="rounded-full bg-amber-50 px-2 py-0.5 text-[11px] text-amber-800 ring-1 ring-amber-100">Stock bajo</span>'),Zs=N("<option> </option>"),Vs=N(`<div class="relative group"><img alt="miniatura" class="h-16 w-full object-cover rounded-lg ring-1 ring-slate-200"/> <button type="button" class="absolute top-1 right-1 rounded bg-rose-600/90 text-white text-[11px] px-1.5 py-0.5 opacity-0 group-hover:opacity-100 transition
                             disabled:opacity-60" aria-label="Eliminar imagen"> </button></div>`),qs=N(`<article class="rounded-2xl border border-slate-200 bg-white overflow-hidden shadow-sm hover:shadow-md transition-shadow"><div class="relative h-40 bg-slate-100"><!> <div class="absolute top-2 left-2 flex gap-2"><!> <span class="rounded-full bg-white/90 ring-1 ring-slate-200 text-[11px] px-2 py-0.5"> </span></div> <button type="button" class="absolute top-2 right-2 inline-flex items-center gap-1.5 rounded-xl px-2.5 py-1 text-[12px]
                   ring-1 ring-rose-200 text-rose-700 bg-rose-50/70 backdrop-blur
                   hover:bg-rose-50 hover:ring-rose-300 active:bg-rose-100
                   disabled:opacity-60 disabled:cursor-not-allowed transition" aria-label="Eliminar producto" title="Eliminar producto"><!></button></div> <div class="p-4 space-y-3"><div class="flex items-start justify-between gap-3"><div class="min-w-0"><p class="truncate font-medium text-slate-900"> </p> <p class="text-xs text-slate-500"> </p></div> <label class="inline-flex items-center gap-2 select-none text-xs text-slate-700 cursor-pointer"><input type="checkbox" class="peer sr-only"/> <span class="relative inline-flex h-5 w-9 items-center rounded-full ring-1 ring-slate-300
                       bg-slate-300 peer-checked:bg-amber-600 peer-checked:ring-amber-500/40
                       transition-colors duration-300 ease-[cubic-bezier(0.34,1.56,0.64,1)]
                       disabled:opacity-60"><span class="absolute left-1 h-3.5 w-3.5 rounded-full bg-white shadow-sm transform-gpu
                         transition-transform duration-300 ease-[cubic-bezier(0.34,1.56,0.64,1)]
                         peer-checked:translate-x-4 peer-active:scale-95"></span></span> <!></label></div> <div class="space-y-2"><div class="flex items-center gap-2 text-sm"><span class="text-slate-600">Precio:</span> <input class="w-28 rounded-lg border border-slate-300 px-2 py-1 text-xs text-right focus:outline-none focus:ring-1 focus:ring-amber-400 focus:border-amber-400" type="number" min="0" step="100"/> <!></div> <div class="flex items-center gap-2 text-xs"><span class="text-slate-600">Stock:</span> <input class="w-16 rounded-lg border border-slate-300 px-2 py-1 text-xs text-right focus:outline-none focus:ring-1 focus:ring-amber-400 focus:border-amber-400" type="number" min="0"/> <!> <!></div></div> <div class="mt-2"><span class="block text-[11px] text-slate-600 mb-1">Categoría</span> <select class="w-full rounded-xl border border-slate-300 px-2.5 py-1.5 text-xs focus:outline-none focus:ring-2 focus:ring-amber-500/70"><option>Sin categoría</option><!></select></div> <div class="pt-1"><div class="block text-xs text-slate-600 mb-1">Imagen principal</div> <label class="relative inline-flex cursor-pointer"><input type="file" accept="image/*" class="sr-only"/> <span class="rounded-xl ring-1 ring-slate-300 px-3 py-1.5 text-sm hover:bg-slate-50 disabled:opacity-60"> </span></label></div> <div class="pt-1"><div class="block text-xs text-slate-600 mb-1">Galería</div> <div class="flex flex-wrap items-center gap-2"><label class="relative inline-flex cursor-pointer"><input type="file" accept="image/*" multiple class="sr-only"/> <span class="rounded-xl ring-1 ring-slate-300 px-3 py-1.5 text-sm hover:bg-slate-50 disabled:opacity-60"> </span></label> <span class="text-xs text-slate-500"> </span></div> <div class="grid grid-cols-4 gap-2 pt-2"></div></div></div></article>`),Hs=N('<div class="mt-6 flex flex-wrap items-center justify-center gap-3"><button class="rounded-lg ring-1 ring-slate-300 px-3 py-1.5 text-sm hover:bg-slate-50 disabled:opacity-50 active:scale-[.98]">Anterior</button> <span class="text-sm text-slate-600">Página <span class="font-medium"> </span> de <span class="font-medium"> </span></span> <button class="rounded-lg ring-1 ring-slate-300 px-3 py-1.5 text-sm hover:bg-slate-50 disabled:opacity-50 active:scale-[.98]">Siguiente</button> <div class="flex items-center gap-2"><span class="text-xs text-slate-500">por página</span> <select class="rounded-lg ring-1 ring-slate-300 px-2 py-1.5 text-sm"><option>6</option><option>10</option><option>18</option><option>30</option></select></div></div>'),Ws=N(`<section class="mx-auto max-w-7xl px-4 py-6 space-y-6"><header class="flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between"><div class="space-y-1"><div class="inline-flex items-center gap-2 rounded-full bg-amber-50 px-3 py-1 text-[11px] font-medium text-amber-700 ring-1 ring-amber-100"><span class="inline-block h-1.5 w-1.5 rounded-full bg-amber-500"></span> Panel de gestión · Productos</div> <h1 class="text-2xl sm:text-3xl font-semibold text-slate-900 tracking-tight">Productos</h1> <p class="text-sm text-slate-600">Administra el catálogo, imágenes, stock y categorías de Cocinas Appel.</p></div> <div class="flex flex-wrap items-center gap-3 text-xs sm:text-sm text-slate-500"><span class="inline-flex items-center gap-1 rounded-full bg-slate-100 px-3 py-1"><span class="h-1.5 w-1.5 rounded-full bg-emerald-500"></span> </span></div></header> <div class="rounded-2xl border border-slate-200 bg-white/80 p-4 shadow-sm backdrop-blur-sm"><div class="grid gap-3 md:grid-cols-5 md:items-end"><label class="md:col-span-2"><span class="block text-xs text-slate-600 mb-1">Buscar (nombre o slug)</span> <input class="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70" placeholder="Ej: lenga, parrilla…"/></label> <label><span class="block text-xs text-slate-600 mb-1">Estado</span> <select class="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70"><option>Todos</option><option>Activos</option><option>Inactivos</option></select></label> <label><span class="block text-xs text-slate-600 mb-1">Precio mín.</span> <input class="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70" type="number" min="0"/></label> <label><span class="block text-xs text-slate-600 mb-1">Precio máx.</span> <input class="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70" type="number" min="0"/></label></div> <div class="mt-3 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"><label class="inline-flex items-center gap-2"><span class="block text-xs text-slate-600">Ordenar por</span> <select class="rounded-xl border border-slate-300 px-3 py-2 text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70"><option>Nombre (A–Z)</option><option>Precio ↑</option><option>Precio ↓</option><option>Stock ↓</option></select></label> <div class="flex items-center gap-2 self-end sm:self-auto"><span class="text-[11px] text-slate-500 hidden sm:inline"> </span> <button type="button" class="rounded-xl ring-1 ring-slate-300 px-3 py-1.5 text-sm hover:bg-slate-50 active:scale-[.98] transition">Limpiar filtros</button></div></div></div> <div class="rounded-2xl border border-slate-200 bg-white p-4 sm:p-5 shadow-sm"><div class="flex items-center justify-between gap-3"><div><h2 class="text-sm font-semibold text-slate-800">Nuevo producto</h2> <p class="text-[11px] text-slate-500 mt-0.5">Completa los campos básicos y sube la imagen principal.</p></div> <span class="text-xs text-slate-500">Campos básicos</span></div> <div class="mt-4 grid gap-3 sm:grid-cols-6"><label class="sm:col-span-2"><span class="block text-xs text-slate-600 mb-1">Nombre</span> <input class="w-full rounded-xl border border-slate-300 px-3 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70" placeholder="Ej: Cocina Lenga 90cm"/></label> <label class="sm:col-span-2"><span class="block text-xs text-slate-600 mb-1">Slug</span> <div class="flex gap-2"><input class="w-full rounded-xl border border-slate-300 px-3 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70" placeholder="cocina-lenga-90"/></div></label> <label class="sm:col-span-6"><span class="block text-xs text-slate-600 mb-1">Descripción</span> <textarea class="w-full rounded-xl border border-slate-300 px-3 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70" placeholder="Descripción detallada del producto (opcional)" rows="3"></textarea></label> <label class="sm:col-span-2"><span class="block text-xs text-slate-600 mb-1">Categoría</span> <select class="w-full rounded-xl border border-slate-300 px-3 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70"><option>Sin categoría</option><!></select></label> <label><span class="block text-xs text-slate-600 mb-1">Precio</span> <input class="w-full rounded-xl border border-slate-300 px-3 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70" type="number" min="0" placeholder="0"/></label> <label><span class="block text-xs text-slate-600 mb-1">Stock</span> <input class="w-full rounded-xl border border-slate-300 px-3 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70" type="number" min="0" placeholder="0"/></label></div> <div class="mt-4 flex flex-wrap items-center gap-3"><label class="inline-flex items-center gap-2 select-none text-sm text-slate-700 cursor-pointer"><input type="checkbox" class="peer sr-only"/> <span class="relative inline-flex h-6 w-11 items-center rounded-full ring-1 ring-slate-300
                 bg-slate-300 peer-checked:bg-amber-600 peer-checked:ring-amber-500/40
                 transition-colors duration-300 ease-[cubic-bezier(0.34,1.56,0.64,1)]"><span class="absolute left-1 h-4 w-4 rounded-full bg-white shadow-sm transform-gpu
                   transition-transform duration-300 ease-[cubic-bezier(0.34,1.56,0.64,1)]
                   peer-checked:translate-x-5 peer-active:scale-95"></span></span> <span class="ml-1"> </span></label> <div class="flex flex-wrap items-center gap-2"><span class="text-sm text-slate-700">Imagen principal</span> <label class="relative inline-flex cursor-pointer"><input type="file" accept="image/*" class="sr-only"/> <span class="rounded-xl ring-1 ring-slate-300 px-3 py-1.5 text-sm hover:bg-slate-50 active:scale-[.98]">Seleccionar</span></label> <!></div> <div class="ml-auto"><button type="button" class="inline-flex items-center gap-2 rounded-xl bg-amber-600 text-white px-4 py-2 text-sm font-medium shadow hover:bg-amber-700 active:scale-[.99] disabled:opacity-60 disabled:cursor-not-allowed"><!></button></div></div></div> <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-5"></div> <!></section>`);function cr(Ne,Le){us(Le,!1);let A=b([]),T=b(!1),L=b(new Set),w=b(new Set),M=b(new Set),k=b(new Set),z=b(new Set),R=b(new Set),B=b(new Set);const de=5;let Y=b([]),u=b({name:"",slug:"",description:"",price:0,stock:0,is_active:!0,category_id:""}),ue=null,G=b(null);const it=new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}),lt=t=>it.format(Number(t??0)||0);let le=b(""),W=b("all"),ee=b(null),ae=b(null),D=b("name"),h=b(1),K=b(10),ve=b([]),ya=b([]),te=b(0),F=b(1);Jt(async()=>{await Promise.all([pe(),nt()])});async function pe(){try{const t=await ks();d(A,(t||[]).map(a=>({...a,images:a.images??[]})))}catch(t){S(String(t?.message??t))}}async function nt(){try{d(Y,await Ss())}catch{S("No se pudieron cargar las categorías")}}function ot(){d(le,""),d(W,"all"),d(ee,null),d(ae,null),d(D,"name"),d(h,1)}const Z=(t,a)=>new Set(t).add(a);function Q(t,a){const r=new Set(t);return r.delete(a),r}function ct(t){const a=t.target,r=a.files?.[0];r&&(ue=r,e(G)&&URL.revokeObjectURL(e(G)),d(G,URL.createObjectURL(r)),a.value="")}function wa(){ue=null,e(G)&&URL.revokeObjectURL(e(G)),d(G,null)}async function dt(){if(!e(u).name?.trim()||!e(u).slug?.trim()){S("Completa Nombre y Slug");return}d(T,!0);try{const t=e(u).category_id?Number(e(u).category_id):null,a={name:e(u).name,slug:e(u).slug,description:e(u).description||"",price:e(u).price,stock:e(u).stock,is_active:e(u).is_active,category_id:t},o=(await Cs(a)).id;ue&&(d(w,Z(e(w),o)),await rt(o,ue)),O("Producto creado"),d(u,{name:"",slug:"",description:"",price:0,stock:0,is_active:!0,category_id:""}),wa(),await pe()}catch(t){S(String(t?.message??t))}finally{d(T,!1),d(w,new Set)}}async function ut(t){const a=t.id,r=t.is_active;I(a,o=>({...o,is_active:!r})),d(L,Z(e(L),a));try{await Pe(a,{is_active:!r}),O(`Producto ${r?"desactivado":"activado"}`)}catch(o){I(a,p=>({...p,is_active:r})),S(String(o?.message??o))}finally{d(L,Q(e(L),a))}}async function vt(t,a,r){if(!a)return;const o=t.id;d(w,Z(e(w),o));try{await rt(o,a),O("Imagen principal actualizada"),await pe()}catch(p){S(String(p?.message??p))}finally{d(w,Q(e(w),o)),r&&(r.target.value="")}}async function pt(t,a,r){if(!a||!a[0])return;const o=t.id;d(M,Z(e(M),o));try{const p=Array.from(a),f=p.map(x=>({id:`tmp-${Math.random()}`,image:URL.createObjectURL(x)})),m=t.images??[];I(o,x=>({...x,images:[...m,...f]}));for(const x of p)await Ns(o,x);f.forEach(x=>URL.revokeObjectURL(x.image)),await pe(),O("Galería actualizada")}catch(p){S(String(p?.message??p))}finally{d(M,Q(e(M),o)),r&&(r.target.value="")}}async function mt(t,a){const r=t.id,o=`${r}:${a.id}`,p=t.images??[];I(r,f=>({...f,images:p.filter(m=>m.id!==a.id)})),d(k,Z(e(k),o));try{await Ls(a.id),O("Imagen eliminada")}catch(f){I(r,m=>({...m,images:p})),S(`No se pudo eliminar: ${String(f?.message??f)}`)}finally{d(k,Q(e(k),o))}}async function gt(t){if(!confirm(`¿Eliminar "${t.name}"? Esta acción no se puede deshacer.`))return;const a=t.id;d(z,Z(e(z),a));try{await Ps(a),d(A,e(A).filter(r=>r.id!==a)),O("Producto eliminado")}catch(r){console.error("Error eliminando producto:",r);const o=String(r?.message||r);o.includes("foreign key")||o.includes("referenced")||o.includes("constraint")?S("No se puede eliminar: este producto está en pedidos existentes. Puedes desactivarlo en su lugar."):S(`Error al eliminar: ${o.substring(0,100)}`)}finally{d(z,Q(e(z),a))}}function I(t,a){d(A,e(A).map(r=>r.id===t?a(r):r))}async function bt(t,a){const r=t.id,o=t.category?.id??null,p=a?Number(a):null;I(r,f=>({...f,category:e(Y).find(m=>m.id===p)||null}));try{await Pe(r,{category_id:p}),O("Categoría actualizada")}catch(f){I(r,m=>({...m,category:e(Y).find(x=>x.id===o)||null})),S(String(f?.message??f))}}async function ft(t,a){const r=a.currentTarget;let o=Number(r.value);if(!Number.isFinite(o)||o<0){S("El stock debe ser un número mayor o igual a 0"),r.value=String(t.stock??0);return}const p=t.id,f=t.stock;I(p,m=>({...m,stock:o})),d(R,Z(e(R),p));try{await Pe(p,{stock:o}),O("Stock actualizado")}catch(m){I(p,x=>({...x,stock:f})),r.value=String(f),S(String(m?.message??m))}finally{d(R,Q(e(R),p))}}async function xt(t,a){const r=a.currentTarget;let o=Number(r.value);if(!Number.isFinite(o)||o<0){S("El precio debe ser un número mayor o igual a 0"),r.value=String(t.price??0);return}const p=t.id,f=t.price;I(p,m=>({...m,price:o})),d(B,Z(e(B),p));try{await Pe(p,{price:o}),O("Precio actualizado")}catch(m){I(p,x=>({...x,price:f})),r.value=String(f),S(String(m?.message??m))}finally{d(B,Q(e(B),p))}}function _t(t){return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"")}vs(()=>(e(le),e(ve),e(A),e(W),e(ee),e(ae),e(D),e(te),e(F),e(K),e(h)),()=>{const t=e(le).trim().toLowerCase();d(ve,e(A).filter(r=>!(e(W)==="active"&&!r.is_active||e(W)==="inactive"&&r.is_active||e(ee)!=null&&Number(r.price)<e(ee)||e(ae)!=null&&Number(r.price)>e(ae)||t&&!`${r.name??""} ${r.slug??""}`.toLowerCase().includes(t))).sort((r,o)=>e(D)==="name"?String(r.name).localeCompare(String(o.name)):e(D)==="price-asc"?Number(r.price)-Number(o.price):e(D)==="price-desc"?Number(o.price)-Number(r.price):e(D)==="stock-desc"?Number(o.stock)-Number(r.stock):0)),d(te,e(ve).length),d(F,Math.max(1,Math.ceil(e(te)/e(K)))),e(h)>e(F)&&d(h,e(F));const a=(e(h)-1)*e(K);d(ya,e(ve).slice(a,a+e(K)))}),ps(),ws();var Me=Ws(),Ie=l(Me),ka=s(l(Ie),2),Sa=l(ka),ht=s(l(Sa));i(Sa),i(ka),i(Ie);var Ee=s(Ie,2),je=l(Ee),ze=l(je),Ue=s(l(ze),2);j(Ue),i(ze);var Ae=s(ze,2),me=s(l(Ae),2);P(()=>{e(W),ye(()=>{e(h)})});var Re=l(me);Re.value=Re.__value="all";var Be=s(Re);Be.value=Be.__value="active";var Ca=s(Be);Ca.value=Ca.__value="inactive",i(me),i(Ae);var De=s(Ae,2),$e=s(l(De),2);j($e),i(De);var Pa=s(De,2),Oe=s(l(Pa),2);j(Oe),i(Pa),i(je);var Na=s(je,2),Te=l(Na),Ge=s(l(Te),2);P(()=>{e(D),ye(()=>{})});var Fe=l(Ge);Fe.value=Fe.__value="name";var Ze=s(Fe);Ze.value=Ze.__value="price-asc";var Ve=s(Ze);Ve.value=Ve.__value="price-desc";var La=s(Ve);La.value=La.__value="stock-desc",i(Ge),i(Te);var Ma=s(Te,2),qe=l(Ma),yt=l(qe);i(qe);var wt=s(qe,2);i(Ma),i(Na),i(Ee);var He=s(Ee,2),We=s(l(He),2),Ke=l(We),Qe=s(l(Ke),2);j(Qe),i(Ke);var Xe=s(Ke,2),Ia=s(l(Xe),2),Ea=l(Ia);j(Ea),i(Ia),i(Xe);var Je=s(Xe,2),ja=s(l(Je),2);gs(ja),i(Je);var Ye=s(Je,2),ea=s(l(Ye),2);P(()=>{e(u),ye(()=>{e(Y)})});var aa=l(ea);aa.value=aa.__value="";var kt=s(aa);ke(kt,1,()=>e(Y),tt,(t,a)=>{var r=Is(),o=l(r,!0);i(r);var p={};P(()=>{y(o,(e(a),v(()=>e(a).name))),p!==(p=(e(a),v(()=>e(a).id)))&&(r.value=(r.__value=(e(a),v(()=>e(a).id)))??"")}),g(t,r)}),i(ea),i(Ye);var ta=s(Ye,2),za=s(l(ta),2);j(za),i(ta);var Ua=s(ta,2),Aa=s(l(Ua),2);j(Aa),i(Ua),i(We);var Ra=s(We,2),sa=l(Ra),ra=l(sa);j(ra);var Ba=s(ra,4),St=l(Ba,!0);i(Ba),i(sa);var ia=s(sa,2),la=s(l(ia),2),Ct=l(la);we(2),i(la);var Pt=s(la,2);{var Nt=t=>{var a=Es(),r=l(a),o=s(r,2);i(a),P(()=>Se(r,"src",e(G))),_("click",o,wa),g(t,a)};E(Pt,t=>{e(G)&&t(Nt)})}i(ia);var Da=s(ia,2),ge=l(Da),Lt=l(ge);{var Mt=t=>{var a=js();we(),g(t,a)},It=t=>{var a=Ya("Crear");g(t,a)};E(Lt,t=>{e(T)?t(Mt):t(It,!1)})}i(ge),i(Da),i(Ra),i(He);var na=s(He,2);ke(na,5,()=>e(ya),t=>t.id,(t,a)=>{var r=qs(),o=l(r),p=l(o);{var f=n=>{var c=zs();P(()=>{Se(c,"src",(e(a),v(()=>e(a).image))),Se(c,"alt",(e(a),v(()=>e(a).name)))}),g(n,c)},m=n=>{var c=Us();g(n,c)};E(p,n=>{e(a),v(()=>e(a).image)?n(f):n(m,!1)})}var x=s(p,2),se=l(x);{var be=n=>{var c=As();g(n,c)};E(se,n=>{e(a),v(()=>!e(a).is_active)&&n(be)})}var re=s(se,2),ne=l(re);i(re),i(x);var V=s(x,2),oe=l(V);{var fe=n=>{var c=Rs();we(),g(n,c)},oa=n=>{var c=Bs();we(),g(n,c)};E(oe,n=>{e(z),e(a),v(()=>e(z).has(e(a).id))?n(fe):n(oa,!1)})}i(V),i(o);var $a=s(o,2),ca=l($a),da=l(ca),ua=l(da),zt=l(ua,!0);i(ua);var Oa=s(ua,2),Ut=l(Oa);i(Oa),i(da);var Ta=s(da,2),ce=l(Ta);j(ce);var At=s(ce,4);{var Rt=n=>{var c=Ds();g(n,c)},Bt=n=>{var c=Ya();P(()=>y(c,(e(a),v(()=>e(a).is_active?"activo":"inactivo")))),g(n,c)};E(At,n=>{e(L),e(a),v(()=>e(L).has(e(a).id))?n(Rt):n(Bt,!1)})}i(Ta),i(ca);var va=s(ca,2),pa=l(va),xe=s(l(pa),2);j(xe);var Dt=s(xe,2);{var $t=n=>{var c=$s();g(n,c)},Ot=n=>{var c=Os(),C=l(c,!0);i(c),P($=>y(C,$),[()=>(e(a),v(()=>lt(e(a).price)))]),g(n,c)};E(Dt,n=>{e(B),e(a),v(()=>e(B).has(e(a).id))?n($t):n(Ot,!1)})}i(pa);var Ga=s(pa,2),_e=s(l(Ga),2);j(_e);var Fa=s(_e,2);{var Tt=n=>{var c=Ts();g(n,c)};E(Fa,n=>{e(R),e(a),v(()=>e(R).has(e(a).id))&&n(Tt)})}var Gt=s(Fa,2);{var Ft=n=>{var c=Gs();g(n,c)},Zt=n=>{var c=et(),C=at(c);{var $=U=>{var J=Fs();g(U,J)};E(C,U=>{e(a),v(()=>Number(e(a).stock)<=de)&&U($)},!0)}g(n,c)};E(Gt,n=>{e(a),v(()=>Number(e(a).stock)<=0)?n(Ft):n(Zt,!1)})}i(Ga),i(va);var ma=s(va,2),X=s(l(ma),2),ga=l(X);ga.value=ga.__value="";var Vt=s(ga);ke(Vt,1,()=>e(Y),tt,(n,c)=>{var C=Zs(),$=l(C,!0);i(C);var U={};P(()=>{y($,(e(c),v(()=>e(c).name))),U!==(U=(e(c),v(()=>e(c).id)))&&(C.value=(C.__value=(e(c),v(()=>e(c).id)))??"")}),g(n,C)}),i(X);var Za;xs(X),i(ma);var ba=s(ma,2),Va=s(l(ba),2),fa=l(Va),qa=s(fa,2),qt=l(qa,!0);i(qa),i(Va),i(ba);var Ha=s(ba,2),xa=s(l(Ha),2),_a=l(xa),ha=l(_a),Wa=s(ha,2),Ht=l(Wa,!0);i(Wa),i(_a);var Ka=s(_a,2),Wt=l(Ka);i(Ka),i(xa);var Qa=s(xa,2);ke(Qa,5,()=>(e(a),v(()=>e(a).images??[])),n=>n.id,(n,c)=>{var C=et(),$=at(C);Ms($,()=>(e(c),v(()=>e(c).id)),U=>{var J=Vs(),Xa=l(J),he=s(Xa,2),Kt=l(he,!0);i(he),i(J),P((Qt,Xt)=>{Se(Xa,"src",(e(c),v(()=>e(c).image))),he.disabled=Qt,y(Kt,Xt)},[()=>(e(k),e(a),e(c),v(()=>e(k).has(`${e(a).id}:${e(c).id}`))),()=>(e(k),e(a),e(c),v(()=>e(k).has(`${e(a).id}:${e(c).id}`)?"...":"Eliminar"))]),_("click",he,hs(ys(()=>mt(e(a),e(c))))),g(U,J)}),g(n,C)}),i(Qa),i(Ha),i($a),i(r),P((n,c,C,$,U,J)=>{y(ne,`${e(a),v(()=>e(a).images?.length||0)??""} img`),V.disabled=n,y(zt,(e(a),v(()=>e(a).name))),y(Ut,`/${e(a),v(()=>e(a).slug)??""}`),bs(ce,(e(a),v(()=>e(a).is_active))),ce.disabled=c,st(xe,(e(a),v(()=>e(a).price))),st(_e,(e(a),v(()=>e(a).stock))),Za!==(Za=(e(a),v(()=>e(a).category?.id??"")))&&(X.value=(X.__value=(e(a),v(()=>e(a).category?.id??"")))??"",_s(X,(e(a),v(()=>e(a).category?.id??"")))),fa.disabled=C,y(qt,$),ha.disabled=U,y(Ht,J),y(Wt,`(${e(a),v(()=>e(a).images?.length||0)??""})`)},[()=>(e(z),e(a),v(()=>e(z).has(e(a).id))),()=>(e(L),e(a),v(()=>e(L).has(e(a).id))),()=>(e(w),e(a),v(()=>e(w).has(e(a).id))),()=>(e(w),e(a),v(()=>e(w).has(e(a).id)?"Subiendo…":"Seleccionar")),()=>(e(M),e(a),v(()=>e(M).has(e(a).id))),()=>(e(M),e(a),v(()=>e(M).has(e(a).id)?"Subiendo…":"Agregar imágenes"))]),_("click",V,()=>gt(e(a))),_("change",ce,()=>ut(e(a))),_("change",xe,n=>xt(e(a),n)),_("change",_e,n=>ft(e(a),n)),_("change",X,n=>bt(e(a),n.currentTarget.value)),_("change",fa,n=>vt(e(a),n.target.files?.[0],n)),_("change",ha,n=>pt(e(a),n.target.files,n)),g(t,r)}),i(na);var Et=s(na,2);{var jt=t=>{var a=Hs(),r=l(a),o=s(r,2),p=s(l(o)),f=l(p,!0);i(p);var m=s(p,2),x=l(m,!0);i(m),i(o);var se=s(o,2),be=s(se,2),re=s(l(be),2);P(()=>{e(K),ye(()=>{})});var ne=l(re);ne.value=ne.__value="6";var V=s(ne);V.value=V.__value="10";var oe=s(V);oe.value=oe.__value="18";var fe=s(oe);fe.value=fe.__value="30",i(re),i(be),i(a),P(()=>{r.disabled=e(h)===1,y(f,e(h)),y(x,e(F)),se.disabled=e(h)===e(F)}),_("click",r,()=>d(h,Math.max(1,e(h)-1))),_("click",se,()=>d(h,Math.min(e(F),e(h)+1))),Ce(re,()=>e(K),oa=>d(K,oa)),g(t,a)};E(Et,t=>{e(F)>1&&t(jt)})}i(Me),P(()=>{y(ht,` ${e(te)??""} producto${e(te)!==1?"s":""} filtrados`),y(yt,`${e(te)??""} resultados actuales`),y(St,(e(u),v(()=>e(u).is_active?"Activo":"Inactivo"))),ge.disabled=e(T)}),H(Ue,()=>e(le),t=>d(le,t)),_("input",Ue,()=>d(h,1)),Ce(me,()=>e(W),t=>d(W,t)),_("change",me,()=>d(h,1)),H($e,()=>e(ee),t=>d(ee,t)),_("input",$e,()=>d(h,1)),H(Oe,()=>e(ae),t=>d(ae,t)),_("input",Oe,()=>d(h,1)),Ce(Ge,()=>e(D),t=>d(D,t)),_("click",wt,ot),H(Qe,()=>e(u).name,t=>q(u,e(u).name=t)),_("blur",Qe,()=>{!e(u).slug.trim()&&e(u).name&&q(u,e(u).slug=_t(e(u).name))}),H(Ea,()=>e(u).slug,t=>q(u,e(u).slug=t)),H(ja,()=>e(u).description,t=>q(u,e(u).description=t)),Ce(ea,()=>e(u).category_id,t=>q(u,e(u).category_id=t)),H(za,()=>e(u).price,t=>q(u,e(u).price=t)),H(Aa,()=>e(u).stock,t=>q(u,e(u).stock=t)),fs(ra,()=>e(u).is_active,t=>q(u,e(u).is_active=t)),_("change",Ct,ct),_("click",ge,dt),g(Ne,Me),ms()}export{cr as component};
