import"../chunks/DsnmJJEf.js";import"../chunks/luk3gl1z.js";import{p as z,f as u,t as j,g as s,b as m,c as F,s as n,d as l,e as a,m as p,r as i}from"../chunks/CwLoShKX.js";import{e as J,s as E}from"../chunks/D8bngpjW.js";import{i as A}from"../chunks/WMMc_YU6.js";import{e as V,i as W}from"../chunks/ThBeqclG.js";import{r as X}from"../chunks/CkmYFb5S.js";import{b as B}from"../chunks/DGOQ8hUW.js";import{p as G}from"../chunks/CdEA5IGF.js";import{i as H}from"../chunks/Ccxz8Bhd.js";import{t as C,a as K}from"../chunks/wZ8Uf4_x.js";var L=u("<p> </p>"),M=u('<div class="rounded-xl border border-rose-100 bg-rose-50 px-4 py-3 text-xs text-rose-700 space-y-1"></div>'),Q=u(`<p class="text-xs text-emerald-700 bg-emerald-50 border border-emerald-100 rounded-xl px-3 py-2">Si el correo está registrado, se ha enviado un enlace de recuperación. Revisa tu
        bandeja de entrada (y spam).</p>`),U=u(`<section class="max-w-lg mx-auto mt-6"><header class="mb-6 text-center"><h1 class="text-2xl font-semibold text-slate-900 tracking-tight">Recuperar contraseña</h1> <p class="mt-1 text-sm text-slate-600">Ingresa el correo con el que creaste tu cuenta y te enviaremos un enlace para
      restablecer tu contraseña.</p></header> <form class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 space-y-4"><!> <div class="space-y-1"><label for="email" class="block text-sm font-medium text-slate-700">Correo electrónico</label> <input id="email" type="email" autocomplete="email" required class="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500" placeholder="tucorreo@ejemplo.com"/></div> <!> <div class="pt-2 flex justify-between items-center"><a href="/login" class="text-xs text-slate-500 hover:text-slate-700 underline-offset-2 hover:underline">Volver a iniciar sesión</a> <button type="submit" class="inline-flex items-center justify-center rounded-xl px-4 py-2 text-sm font-medium bg-amber-600 text-white hover:bg-amber-700 disabled:opacity-60"> </button></div></form></section>`);function ce(I,N){z(N,!1);const R="https://tienda-backend-rodrigo.azurewebsites.net".replace(/\/+$/,"");function T(){return typeof document>"u"?"":document.cookie.split("; ").find(e=>e.startsWith("csrftoken="))?.split("=")[1]??""}let c=p(""),d=p(!1),o=p([]),y=p(!1);async function q(e){if(e.preventDefault(),a(o,[]),!s(c).trim()){a(o,["Ingresa tu correo electrónico."]);return}a(d,!0);try{const t=await fetch(`${R}/api/auth/password-reset/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":T()},body:JSON.stringify({email:s(c).trim()})});if(!t.ok){try{const r=await t.json();Array.isArray(r.detail)?a(o,r.detail.map(h=>String(h))):r.detail?a(o,[String(r.detail)]):a(o,["No se pudo enviar el correo de recuperación."])}catch{const r=await t.text();a(o,[r||"No se pudo enviar el correo de recuperación."])}C(s(o)[0]||"Error al enviar el correo.");return}a(y,!0),K("Si el correo está registrado, se ha enviado un enlace para restablecer la contraseña.")}catch(t){const r=String(t?.message??t)||"Error al conectar con el servidor.";a(o,[r]),C(r)}finally{a(d,!1)}}H();var f=U(),v=n(l(f),2),_=l(v);{var D=e=>{var t=M();V(t,5,()=>s(o),W,(r,h)=>{var g=L(),$=l(g,!0);i(g),j(()=>E($,s(h))),m(r,g)}),i(t),m(e,t)};A(_,e=>{s(o).length&&e(D)})}var b=n(_,2),w=n(l(b),2);X(w),i(b);var S=n(b,2);{var O=e=>{var t=Q();m(e,t)};A(S,e=>{s(y)&&e(O)})}var k=n(S,2),x=n(l(k),2),P=l(x,!0);i(x),i(k),i(v),i(f),j(()=>{x.disabled=s(d),E(P,s(d)?"Enviando…":"Enviar enlace")}),B(w,()=>s(c),e=>a(c,e)),J("submit",v,G(q)),m(I,f),F()}export{ce as component};
