import"../chunks/DsnmJJEf.js";import"../chunks/luk3gl1z.js";import{o as tt}from"../chunks/_gNL4IXV.js";import{p as at,o as rt,q as st,f as v,t as f,d as s,s as l,g as e,b as c,c as ot,m as b,e as p,r,x as it,u as i,w as Ce,a as le}from"../chunks/CwLoShKX.js";import{s as x,e as ne}from"../chunks/D8bngpjW.js";import{i as _}from"../chunks/WMMc_YU6.js";import{e as B,i as W}from"../chunks/ThBeqclG.js";import{r as lt,s as S}from"../chunks/CkmYFb5S.js";import{s as nt}from"../chunks/DIJ89BUl.js";import{b as dt}from"../chunks/DGOQ8hUW.js";import{b as ct}from"../chunks/COJT2EDT.js";import{i as mt}from"../chunks/Ccxz8Bhd.js";import{k as vt}from"../chunks/BtBNgcIe.js";import{a as ut}from"../chunks/UF_B8rlF.js";import{C as pt}from"../chunks/Iv4i7Y_e.js";var xt=v('<button type="button"> </button>'),gt=v('<div class="animate-pulse bg-white rounded-2xl shadow-sm overflow-hidden ring-1 ring-slate-200"><div class="w-full aspect-[4/3] bg-slate-200"></div> <div class="p-4 space-y-3"><div class="h-4 bg-slate-200 rounded w-2/3"></div> <div class="h-3 bg-slate-200 rounded w-1/2"></div> <div class="flex gap-2 pt-2"><div class="h-9 bg-slate-200 rounded w-1/3"></div> <div class="h-9 bg-slate-200 rounded w-1/3"></div></div></div></div>'),ft=v('<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>'),bt=v('<div class="flex justify-center"><div class="rounded-xl border border-rose-100 bg-rose-50 px-4 py-3 text-sm text-rose-700 max-w-md text-center"> </div></div>'),_t=v('<span class="rounded-full bg-amber-500/95 px-2.5 py-0.5 text-xs font-semibold text-black/90 shadow-sm ring-1 ring-amber-400/60"> </span>'),ht=v('<div class="absolute top-3 left-3 flex flex-wrap gap-2"></div>'),wt=v('<span class="inline-flex items-center rounded-full bg-slate-100 px-2.5 py-0.5 text-[11px] font-medium text-slate-700"> </span>'),yt=v('<p class="text-sm text-slate-600 line-clamp-2"> </p>'),kt=v('<span class="inline-flex items-center gap-1 rounded-full bg-rose-50 px-2 py-0.5 text-[11px] font-medium text-rose-700 ring-1 ring-rose-100"><span class="h-1.5 w-1.5 rounded-full bg-rose-500"></span> Sin stock</span>'),At=v('<span class="inline-flex items-center gap-1 rounded-full bg-amber-50 px-2 py-0.5 text-[11px] font-medium text-amber-700 ring-1 ring-amber-100"><span class="h-1.5 w-1.5 rounded-full bg-amber-500"></span> </span>'),Ct=v('<div class="flex items-center justify-between text-xs text-slate-500"><span> </span> <!></div>'),Pt=v(`<article class="group bg-white rounded-2xl shadow-sm overflow-hidden ring-1 ring-slate-200
                     hover:shadow-xl hover:ring-slate-300 transition transform hover:-translate-y-0.5"><div class="relative"><img class="w-full aspect-[4/3] object-cover bg-slate-100 transition-transform duration-500 group-hover:scale-[1.03]" loading="lazy"/> <!></div> <div class="p-4 sm:p-5 flex flex-col gap-3"><header class="flex items-start justify-between gap-3"><div class="space-y-1"><h3 class="text-base sm:text-lg font-semibold leading-snug text-slate-900"> </h3> <!></div> <span class="shrink-0 rounded-lg bg-amber-50 px-2.5 py-1.5 text-sm sm:text-base font-semibold text-amber-700 ring-1 ring-amber-200"> </span></header> <!> <!> <div class="mt-2 flex flex-wrap items-center gap-2"><a target="_blank" rel="noopener" class="inline-flex items-center justify-center gap-2 rounded-lg border border-emerald-200 bg-emerald-50 px-3.5 py-2 text-xs sm:text-sm font-medium text-emerald-800 hover:bg-emerald-100 hover:border-emerald-300 active:scale-[.98] transition"><svg viewBox="0 0 24 24" class="h-4 w-4" fill="currentColor" aria-hidden="true"><path d="M20.5 3.5A11.9 11.9 0 0 0 12 0C5.4 0 0 5.4 0 12c0 2 .5 3.8 1.4 5.5L0 24l6.7-1.8A12 12 0 0 0 12 24c6.6 0 12-5.4 12-12 0-3.2-1.3-6.2-3.5-8.5zM12 22a10 10 0 0 1-5.1-1.4l-.4-.3-4 .9.9-3.9-.3-.4A9.9 9.9 0 1 1 22 12c0 5.5-4.5 10-10 10zm5-7.6c-.3-.2-1.8-.9-2-.9-.3-.1-.5-.2-.7.2-.2.3-.8 1-.9 1.2-.2.2-.4.2-.7 0a7.6 7.6 0 0 1-2.2-1.4 8.2 8.2 0 0 1-1.5-1.9c-.2-.3 0-.5.2-.7l.5-.6c.1-.2.2-.3.3-.6 0-.2 0-.4 0-.6 0-.2-.7-1.7-1-2.3-.2-.6-.5-.5-.7-.5h-.6c-.2 0-.6.1-.9.4-.2.3-.9.9-.9 2.2s.9 2.5 1 2.7c.1.2 1.8 2.9 4.2 4 .6.3 1.1.5 1.5.6.6.2 1.1.2 1.6.1.5-.1 1.8-.7 2-1.4.2-.7.2-1.3.1-1.4z"></path></svg> Consultar por WhatsApp</a> <a class="inline-flex items-center justify-center rounded-lg px-3.5 py-2 text-xs sm:text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-100/70 transition">Más detalles</a> <button class="inline-flex items-center justify-center rounded-lg px-3.5 py-2 text-xs sm:text-sm font-medium text-white bg-slate-900/95 hover:bg-slate-900 active:scale-[.98] disabled:opacity-60"> </button></div></div></article>`),jt=v('<div class="mt-8 flex justify-center"><p class="text-center text-slate-600 text-sm sm:text-base">No encontramos productos con esos filtros. Prueba cambiar la búsqueda o la categoría.</p></div>'),Lt=v('<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div> <!>',1),It=v('<section id="productos" class="bg-slate-50/80 py-10 sm:py-12 lg:py-16"><div class="mx-auto max-w-7xl px-4"><div class="space-y-2 max-w-2xl mx-auto text-center"><div class="inline-flex items-center gap-2 rounded-full bg-amber-50 px-3 py-1 text-xs font-medium text-amber-700 ring-1 ring-amber-100"><span class="inline-block h-1.5 w-1.5 rounded-full bg-amber-500"></span> Catálogo de Cocinas Appel</div> <h2 class="text-2xl sm:text-3xl font-semibold text-slate-900 tracking-tight">Productos</h2> <p class="text-slate-600 text-sm sm:text-base mt-1">Fabricación propia y accesorios seleccionados para tu proyecto de cocina.</p></div> <div class="mt-8 max-w-4xl mx-auto"><div class="rounded-2xl bg-white/90 shadow-sm ring-1 ring-slate-200 px-4 py-4 sm:px-5 sm:py-5 space-y-4"><div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"><div><h3 class="text-sm font-semibold text-slate-900">Filtrar productos</h3> <p class="text-[11px] text-slate-500">Busca por nombre, categoría u ordena por precio.</p></div></div> <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between"><div class="flex flex-wrap gap-2 md:max-w-[55%]"></div> <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3 md:max-w-[45%] md:justify-end"><div class="relative w-full sm:w-48"><span class="pointer-events-none absolute inset-y-0 left-3 flex items-center"><svg class="h-4 w-4 text-slate-400" viewBox="0 0 24 24" fill="none"><path d="M15.5 15.5L20 20" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"></path><circle cx="11" cy="11" r="5.5" stroke="currentColor" stroke-width="1.6"></circle></svg></span> <input type="search" placeholder="Buscar…" class="w-full rounded-xl border border-slate-300 bg-white/90 px-9 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 focus:border-amber-400 shadow-sm"/></div> <div class="w-full sm:w-44"><select class="w-full rounded-xl border border-slate-300 bg-white/90 px-3 py-2 text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 focus:border-amber-400 shadow-sm"><option>Orden: popularidad</option><option>Precio: menor a mayor</option><option>Precio: mayor a menor</option></select></div></div></div></div></div> <div class="mt-8"><!></div></div> <!></section>');function Ut(Pe,je){at(je,!1);const $=b(),Le="56977082796",E="/images/hero.webp",Ie=5,F="https://tienda-backend-rodrigo.azurewebsites.net".replace(/\/+$/,""),Te=t=>!!t&&/^https?:\/\//i.test(t||"");function de(t){return t?Te(t)?t:F?`${F}${t.startsWith("/")?"":"/"}${t}`:null:null}let ce=b(!0),O=b(""),j=b([]),q=b([{id:"todo",label:"Todos"}]),h=b("todo"),L=b(""),w=b("popular");const Se=new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",maximumFractionDigits:0}).format,$e=t=>typeof t=="number"&&t>0&&t<=Ie;function Me(t){const o=de(t?.image),m=de(t?.images?.[0]?.image),u=o||m||E;return{id:t.id,nombre:t.name??"Producto",precio:Number(t.price??0),img:u,categoria:t.category??"otros",desc:t.description??"",slug:t.slug??t.id,badges:Array.isArray(t.badges)?t.badges:[],stock:typeof t.stock=="number"?t.stock:Number(t.stock??0)}}function Ne(t){const o=new Set;t.forEach(u=>o.add(u.categoria));const m=Array.from(o).sort().map(u=>({id:u,label:u.charAt(0).toUpperCase()+u.slice(1)}));p(q,[{id:"todo",label:"Todos"},...m])}tt(async()=>{try{const t=await vt(),o=(Array.isArray(t)?t:[]).map(Me);p(j,o),Ne(o),console.debug("VITE_API_URL:",F),console.debug("Productos mapeados:",e(j).map(m=>m.img))}catch(t){p(O,t?.message||"No se pudieron cargar los productos"),p(j,[]),p(q,[{id:"todo",label:"Todos"}])}finally{p(ce,!1)}});const ze=t=>`https://wa.me/${Le}?text=${encodeURIComponent(`Hola, me interesa el producto "${t.nombre}" (ID: ${t.id}). ¿Podrían darme más información?`)}`;let y=b(null);async function Be(t){try{p(y,t.id),await ut(Number(t.id),1)}finally{p(y,null)}}rt(()=>(e(j),e(h),e(L),e(w)),()=>{p($,e(j).filter(t=>e(h)==="todo"?!0:t.categoria===e(h)).filter(t=>e(L).trim()?(t.nombre+" "+(t.desc??"")).toLowerCase().includes(e(L).toLowerCase()):!0).slice().sort((t,o)=>e(w)==="precio-asc"?t.precio-o.precio:e(w)==="precio-desc"?o.precio-t.precio:0))}),st(),mt();var D=It(),H=s(D),R=l(s(H),2),me=s(R),ve=l(s(me),2),U=s(ve);B(U,5,()=>e(q),W,(t,o)=>{var m=xt(),u=s(m,!0);r(m),f(()=>{nt(m,1,(e(h),e(o),i(()=>`text-xs sm:text-[13px] px-3 py-1.5 rounded-full ring-1 transition
                  ${e(h)===e(o).id?"bg-amber-600 text-white ring-amber-500 shadow-sm":"bg-white text-slate-700 ring-slate-300 hover:bg-slate-50"}`))),S(m,"aria-pressed",(e(h),e(o),i(()=>e(h)===e(o).id))),x(u,(e(o),i(()=>e(o).label)))}),ne("click",m,()=>p(h,e(o).id)),c(t,m)}),r(U);var ue=l(U,2),K=s(ue),pe=l(s(K),2);lt(pe),r(K);var xe=l(K,2),V=s(xe);f(()=>{e(w),it(()=>{})});var G=s(V);G.value=G.__value="popular";var J=l(G);J.value=J.__value="precio-asc";var ge=l(J);ge.value=ge.__value="precio-desc",r(V),r(xe),r(ue),r(ve),r(me),r(R);var fe=l(R,2),We=s(fe);{var Ee=t=>{var o=ft();B(o,4,()=>Array(6),W,(m,u)=>{var Q=gt();c(m,Q)}),r(o),c(t,o)},Fe=t=>{var o=Ce(),m=le(o);{var u=k=>{var A=bt(),C=s(A),X=s(C,!0);r(C),r(A),f(()=>x(X,e(O))),c(k,A)},Q=k=>{var A=Lt(),C=le(A);B(C,5,()=>e($),W,(I,a)=>{var Y=Pt(),Z=s(Y),M=s(Z),De=l(M,2);{var He=n=>{var d=ht();B(d,5,()=>(e(a),i(()=>e(a).badges)),W,(g,re)=>{var T=_t(),se=s(T,!0);r(T),f(()=>x(se,e(re))),c(g,T)}),r(d),c(n,d)};_(De,n=>{e(a),i(()=>e(a).badges?.length)&&n(He)})}r(Z);var be=l(Z,2),ee=s(be),te=s(ee),ae=s(te),Re=s(ae,!0);r(ae);var Ue=l(ae,2);{var Ke=n=>{var d=wt(),g=s(d,!0);r(d),f(()=>x(g,(e(a),i(()=>e(a).categoria)))),c(n,d)};_(Ue,n=>{e(a),i(()=>e(a).categoria)&&n(Ke)})}r(te);var _e=l(te,2),Ve=s(_e,!0);r(_e),r(ee);var he=l(ee,2);{var Ge=n=>{var d=yt(),g=s(d,!0);r(d),f(()=>x(g,(e(a),i(()=>e(a).desc)))),c(n,d)};_(he,n=>{e(a),i(()=>e(a).desc)&&n(Ge)})}var we=l(he,2);{var Je=n=>{var d=Ct(),g=s(d),re=s(g);r(g);var T=l(g,2);{var se=P=>{var z=kt();c(P,z)},Xe=P=>{var z=Ce(),Ye=le(z);{var Ze=oe=>{var ie=At(),et=l(s(ie));r(ie),f(()=>x(et,` Stock bajo: ${e(a),i(()=>e(a).stock)??""}`)),c(oe,ie)};_(Ye,oe=>{e(a),i(()=>$e(e(a).stock))&&oe(Ze)},!0)}c(P,z)};_(T,P=>{e(a),i(()=>e(a).stock===0)?P(se):P(Xe,!1)})}r(d),f(()=>x(re,`Stock: ${e(a),i(()=>e(a).stock)??""}`)),c(n,d)};_(we,n=>{e(a),i(()=>typeof e(a).stock=="number")&&n(Je)})}var ye=l(we,2),ke=s(ye),Ae=l(ke,2),N=l(Ae,2),Qe=s(N,!0);r(N),r(ye),r(be),r(Y),f((n,d)=>{S(M,"src",(e(a),i(()=>e(a).img||E))),S(M,"alt",(e(a),i(()=>e(a).nombre))),x(Re,(e(a),i(()=>e(a).nombre))),x(Ve,n),S(ke,"href",d),S(Ae,"href",(e(a),i(()=>`/productos/${e(a).slug??e(a).id}`))),N.disabled=(e(y),e(a),i(()=>e(y)===e(a).id)),x(Qe,(e(y),e(a),i(()=>e(y)===e(a).id?"Agregando…":"Agregar al carrito")))},[()=>(e(a),i(()=>Se(e(a).precio))),()=>(e(a),i(()=>ze(e(a))))]),ne("error",M,n=>{n.currentTarget.src=E}),ne("click",N,()=>Be(e(a))),c(I,Y)}),r(C);var X=l(C,2);{var qe=I=>{var a=jt();c(I,a)};_(X,I=>{e($),i(()=>!e($).length)&&I(qe)})}c(k,A)};_(m,k=>{e(O)?k(u):k(Q,!1)},!0)}c(t,o)};_(We,t=>{e(ce)?t(Ee):t(Fe,!1)})}r(fe),r(H);var Oe=l(H,2);pt(Oe,{}),r(D),dt(pe,()=>e(L),t=>p(L,t)),ct(V,()=>e(w),t=>p(w,t)),c(Pe,D),ot()}export{Ut as component};
