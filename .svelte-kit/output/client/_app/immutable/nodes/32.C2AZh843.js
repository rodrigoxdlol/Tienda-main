import{n as we}from"../chunks/BtBNgcIe.js";import{e as ye}from"../chunks/KjYeVjkE.js";import"../chunks/DsnmJJEf.js";import"../chunks/luk3gl1z.js";import{p as ke,f as c,t as b,b as i,c as Ce,s as l,d as s,u as o,g as p,m as X,r,n as Y,e as N,h as Ae,v as Ie,w as Pe,a as je}from"../chunks/CwLoShKX.js";import{e as A,s as g}from"../chunks/D8bngpjW.js";import{i as f}from"../chunks/WMMc_YU6.js";import{e as $e,i as Se}from"../chunks/ThBeqclG.js";import{s as h}from"../chunks/CkmYFb5S.js";import{s as Te}from"../chunks/DIJ89BUl.js";import{i as ze}from"../chunks/Ccxz8Bhd.js";import{p as Be}from"../chunks/DeyUZ0zj.js";import{a as Le}from"../chunks/UF_B8rlF.js";import{C as Me}from"../chunks/Iv4i7Y_e.js";const De=async({params:I})=>{try{return{product:await we(I.slug)}}catch{throw ye(404,"Producto no encontrado")}},lt=Object.freeze(Object.defineProperty({__proto__:null,load:De},Symbol.toStringTag,{value:"Module"}));var We=c('<button type="button"><img class="w-full h-full object-cover"/></button>'),He=c('<div class="flex gap-2 overflow-x-auto pb-2"></div>'),Ne=c('<span class="inline-flex items-center px-2.5 py-0.5 bg-blue-50 text-blue-700 text-xs font-medium rounded-full ring-1 ring-blue-200"> </span>'),Oe=c('<span class="inline-flex items-center gap-1.5 rounded-full bg-rose-50 px-2.5 py-0.5 text-xs text-rose-700 font-medium ring-1 ring-rose-200"><span class="h-1.5 w-1.5 rounded-full bg-rose-500"></span> Sin stock</span>'),Ee=c('<span class="inline-flex items-center gap-1.5 rounded-full bg-amber-50 px-2.5 py-0.5 text-xs text-amber-700 font-medium ring-1 ring-amber-200"><span class="h-1.5 w-1.5 rounded-full bg-amber-500"></span> </span>'),Fe=c('<span class="text-slate-600 text-sm"> </span>'),Re=c('<div class="flex items-center gap-2 text-sm"><!></div>'),Ue=c('<div class="border-t border-slate-200 pt-4"><h2 class="text-base font-semibold mb-2 text-slate-900">Descripción</h2> <p class="text-sm text-slate-700 leading-relaxed whitespace-pre-line"> </p></div>'),Ve=Ae('<svg class="animate-spin h-4 w-4" viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" opacity="0.25"></circle><path d="M22 12a10 10 0 0 1-10 10" stroke="currentColor" stroke-width="4"></path></svg> Agregando…',1),qe=c('<main class="bg-slate-50 min-h-screen"><div class="container mx-auto px-4 py-6 lg:py-8 max-w-6xl"><nav class="mb-4 text-xs text-slate-600"><a href="/" class="hover:text-amber-600 transition">Inicio</a> <span class="mx-2">/</span> <a href="/productos" class="hover:text-amber-600 transition">Productos</a> <span class="mx-2">/</span> <span class="text-slate-900 font-medium"> </span></nav> <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8"><div class="space-y-3"><div class="relative aspect-square rounded-xl overflow-hidden bg-white shadow-sm ring-1 ring-slate-200"><img class="w-full h-full object-cover"/></div> <!></div> <div class="space-y-4"><!> <h1 class="text-2xl lg:text-3xl font-bold text-slate-900 tracking-tight"> </h1> <div class="text-3xl font-bold text-amber-600"> </div> <!> <!> <div class="flex flex-col sm:flex-row gap-2.5 pt-3"><button type="button" class="flex-1 inline-flex items-center justify-center gap-2 rounded-lg bg-slate-900 px-5 py-2.5 text-sm font-semibold text-white shadow hover:bg-slate-800 active:scale-[.98] disabled:opacity-50 disabled:cursor-not-allowed transition"><!></button> <a target="_blank" rel="noopener noreferrer" class="flex-1 inline-flex items-center justify-center gap-2 rounded-lg border-2 border-emerald-200 bg-emerald-50 px-5 py-2.5 text-sm font-semibold text-emerald-800 hover:bg-emerald-100 hover:border-emerald-300 active:scale-[.98] transition"><svg viewBox="0 0 24 24" class="h-4 w-4" fill="currentColor" aria-hidden="true"><path d="M20.5 3.5A11.9 11.9 0 0 0 12 0C5.4 0 0 5.4 0 12c0 2 .5 3.8 1.4 5.5L0 24l6.7-1.8A12 12 0 0 0 12 24c6.6 0 12-5.4 12-12 0-3.2-1.3-6.2-3.5-8.5zM12 22a10 10 0 0 1-5.1-1.4l-.4-.3-4 .9.9-3.9-.3-.4A9.9 9.9 0 1 1 22 12c0 5.5-4.5 10-10 10zm5-7.6c-.3-.2-1.8-.9-2-.9-.3-.1-.5-.2-.7.2-.2.3-.8 1-.9 1.2-.2.2-.4.2-.7 0a7.6 7.6 0 0 1-2.2-1.4 8.2 8.2 0 0 1-1.5-1.9c-.2-.3 0-.5.2-.7l.5-.6c.1-.2.2-.3.3-.6 0-.2 0-.4 0-.6 0-.2-.7-1.7-1-2.3-.2-.6-.5-.5-.7-.5h-.6c-.2 0-.6.1-.9.4-.2.3-.9.9-.9 2.2s.9 2.5 1 2.7c.1.2 1.8 2.9 4.2 4 .6.3 1.1.5 1.5.6.6.2 1.1.2 1.6.1.5-.1 1.8-.7 2-1.4.2-.7.2-1.3.1-1.4z"></path></svg> Consultar por WhatsApp</a></div> <a href="/productos" class="inline-flex items-center gap-2 text-xs text-slate-600 hover:text-slate-900 transition mt-2"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> Volver a productos</a></div></div></div> <!></main>');function it(I,y){ke(y,!1);let Z=Be(y,"data",8);const ee="56942312053",P="/images/hero.webp",O="https://tienda-backend-rodrigo.azurewebsites.net".replace(/\/+$/,""),te=e=>!!e&&/^https?:\/\//i.test(e||"");function E(e){return e?te(e)?e:O?`${O}${e.startsWith("/")?"":"/"}${e}`:null:null}const a=Z().product;console.log("Producto completo:",a),console.log("Imágenes del producto:",a?.images);const F=E(a?.image)||P,R=(a?.images||[]).map(e=>{const t=e?.image||e?.url||e;return console.log("Procesando imagen:",e,"→",t),E(t)}).filter(Boolean);console.log("Imagen principal:",F),console.log("Galería procesada:",R);const k=[F,...R];console.log("Todas las imágenes:",k);let j=X(k[0]);function ae(e){N(j,e)}const re=new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",maximumFractionDigits:0}).format,se=()=>`https://wa.me/${ee}?text=${encodeURIComponent(`Hola, me interesa el producto "${a.name}" (ID: ${a.id}). ¿Podrían darme más información?`)}`;let _=X(!1);async function oe(){try{N(_,!0),await Le(Number(a.id),1)}finally{N(_,!1)}}ze();var $=qe(),S=s($),T=s(S),U=l(s(T),8),ne=s(U,!0);r(U),r(T);var V=l(T,2),z=s(V),B=s(z),L=s(B);r(B);var le=l(B,2);{var ie=e=>{var t=He();$e(t,5,()=>k,Se,(d,v,C)=>{var n=We();h(n,"aria-label",`Ver imagen ${C+1}`);var m=s(n);r(n),b(()=>{Te(n,1,`relative w-16 h-16 flex-shrink-0 rounded-lg overflow-hidden border-2 transition-all
                       ${p(j)===p(v)?"border-blue-600 ring-2 ring-blue-600/50":"border-slate-300 hover:border-slate-400"}`),h(m,"src",p(v)),h(m,"alt",`${o(()=>a.name)??""} - imagen ${C+1}`)}),A("error",m,W=>{W.currentTarget.src=P}),A("click",n,()=>ae(p(v))),i(d,n)}),r(t),i(e,t)};f(le,e=>{o(()=>k.length>1)&&e(ie)})}r(z);var q=l(z,2),G=s(q);{var ce=e=>{var t=Ne(),d=s(t,!0);r(t),b(()=>g(d,o(()=>a.category))),i(e,t)};f(G,e=>{o(()=>a.category)&&e(ce)})}var M=l(G,2),de=s(M,!0);r(M);var D=l(M,2),me=s(D,!0);r(D);var J=l(D,2);{var pe=e=>{var t=Re(),d=s(t);{var v=n=>{var m=Oe();i(n,m)},C=n=>{var m=Pe(),W=je(m);{var he=x=>{var u=Ee(),H=l(s(u));r(u),b(()=>g(H,` Stock bajo: ${o(()=>a.stock)??""} unidades`)),i(x,u)},_e=x=>{var u=Fe(),H=s(u);r(u),b(()=>g(H,`Stock disponible: ${o(()=>a.stock)??""}`)),i(x,u)};f(W,x=>{o(()=>a.stock<=5)?x(he):x(_e,!1)},!0)}i(n,m)};f(d,n=>{o(()=>a.stock===0)?n(v):n(C,!1)})}r(t),i(e,t)};f(J,e=>{o(()=>typeof a.stock=="number")&&e(pe)})}var K=l(J,2);{var ve=e=>{var t=Ue(),d=l(s(t),2),v=s(d,!0);r(d),r(t),b(()=>g(v,o(()=>a.description))),i(e,t)};f(K,e=>{o(()=>a.description)&&e(ve)})}var Q=l(K,2),w=s(Q),ue=s(w);{var ge=e=>{var t=Ve();Y(),i(e,t)},fe=e=>{var t=Ie("Agregar al carrito");i(e,t)};f(ue,e=>{p(_)?e(ge):e(fe,!1)})}r(w);var xe=l(w,2);r(Q),Y(2),r(q),r(V),r(S);var be=l(S,2);Me(be,{}),r($),b((e,t)=>{g(ne,o(()=>a.name)),h(L,"src",p(j)),h(L,"alt",o(()=>a.name)),g(de,o(()=>a.name)),g(me,e),w.disabled=(p(_),o(()=>p(_)||a.stock===0)),h(xe,"href",t)},[()=>o(()=>re(Number(a.price))),()=>o(se)]),A("error",L,e=>{e.currentTarget.src=P}),A("click",w,oe),i(I,$),Ce()}export{it as component,lt as universal};
