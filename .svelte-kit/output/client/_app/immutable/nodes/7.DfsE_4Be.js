import"../chunks/DsnmJJEf.js";import"../chunks/luk3gl1z.js";import{o as ga}from"../chunks/_gNL4IXV.js";import{p as xa,o as He,q as ha,f as x,t as H,g as e,b as p,c as _a,m as v,s as o,d as i,e as d,r,n as C,u,h as P,v as me,w as ya,a as wa,x as be}from"../chunks/CwLoShKX.js";import{e as y,s as J}from"../chunks/D8bngpjW.js";import{i as g}from"../chunks/WMMc_YU6.js";import{e as Pe,i as ka}from"../chunks/ThBeqclG.js";import{r as I,s as fe,a as Sa}from"../chunks/CkmYFb5S.js";import{b as M}from"../chunks/DGOQ8hUW.js";import{i as ja}from"../chunks/Ccxz8Bhd.js";import{f as Ca,g as Ia,h as La,i as Re,j as Ma}from"../chunks/Q6rjOpry.js";import{t as L,a as ge}from"../chunks/wZ8Uf4_x.js";var Oa=P('<svg class="h-3.5 w-3.5 animate-spin" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-opacity=".25" stroke-width="3"></circle><path d="M21 12a9 9 0 0 1-9 9" stroke="currentColor" stroke-width="3" stroke-linecap="round"></path></svg> Cargando…',1),Ba=P('<svg class="h-3.5 w-3.5" viewBox="0 0 24 24" fill="none"><path d="M5 12a7 7 0 0 1 11.95-4.95L19 4m-1 5v-4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path><path d="M19 12a7 7 0 0 1-11.95 4.95L5 20m1-5v4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path></svg> Actualizar',1),Ta=x('<div class="flex items-center gap-2"><img alt="preview" class="h-12 w-12 rounded-xl object-cover ring-1 ring-slate-200 shadow-sm"/> <button type="button" class="text-[11px] font-medium text-rose-600 hover:underline">Quitar</button></div>'),Ga=P('<svg class="h-4 w-4 animate-spin" viewBox="0 0 24 24" fill="none"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 0 1 8-8v3a5 5 0 0 0-5 5H4z"></path></svg> Subiendo…',1),Ha=x('<div class="rounded-2xl border border-slate-200 bg-white p-4 space-y-3"><div class="h-40 rounded-xl bg-slate-100 animate-pulse"></div> <div class="h-3 rounded bg-slate-100 animate-pulse"></div> <div class="h-3 rounded bg-slate-100 animate-pulse w-2/3"></div></div>'),Pa=x('<div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3"></div>'),Ra=x(`<div class="rounded-2xl border border-dashed border-slate-300 bg-slate-50/60 px-4 py-10 text-center text-sm text-slate-500">Aún no has agregado imágenes al inicio. Sube una imagen con el formulario superior
        para comenzar a armar el slider.</div>`),Da=x('<span class="inline-flex items-center gap-1 rounded-full bg-slate-900/85 px-2 py-0.5 text-[11px] text-white">Inactiva</span>'),Ea=P('<svg class="h-3.5 w-3.5 animate-spin text-slate-500" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-opacity=".25" stroke-width="3"></circle><path d="M21 12a9 9 0 0 1-9 9" stroke="currentColor" stroke-width="3" stroke-linecap="round"></path></svg>'),Ua=x('<p class="text-[11px] text-slate-500">Guardando cambios…</p>'),Na=x(`<div class="group rounded-2xl border border-slate-200 bg-white overflow-hidden shadow-sm hover:shadow-md transition"><div class="relative h-44 bg-slate-100"><img class="absolute inset-0 h-full w-full object-cover transition-transform duration-300 group-hover:scale-[1.02]"/> <div class="absolute top-2 left-2 flex flex-col gap-1"><span class="inline-flex items-center gap-1 rounded-full bg-white/90 px-2 py-0.5 text-[11px] font-medium text-slate-700 ring-1 ring-slate-200"><span class="h-1.5 w-1.5 rounded-full bg-amber-500"></span> <span> </span></span> <!></div></div> <div class="p-4 space-y-3"><label class="block"><span class="block text-xs text-slate-600 mb-1">Título</span> <input class="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70" placeholder="Título"/></label> <label class="block"><span class="block text-xs text-slate-600 mb-1">Descripción</span> <input class="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70" placeholder="Texto breve"/></label> <div class="flex items-center justify-between gap-3"><label class="inline-flex items-center gap-2 select-none text-xs text-slate-700 cursor-pointer"><input type="checkbox" class="peer sr-only"/> <span class="relative inline-flex h-5 w-9 items-center rounded-full ring-1 ring-slate-300
                           bg-slate-300 peer-checked:bg-emerald-600 peer-checked:ring-emerald-500/40
                           transition-colors duration-300 disabled:opacity-60"><span class="absolute left-1 h-3.5 w-3.5 rounded-full bg-white shadow-sm transform-gpu
                             transition-transform duration-300 peer-checked:translate-x-4"></span></span> <!></label> <div class="flex items-center gap-2"><input class="w-24 rounded-xl border border-slate-300 px-3 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70" type="number" title="Orden"/> <button type="button" class="rounded-lg bg-rose-600 text-white px-3 py-1.5 text-xs font-medium hover:bg-rose-700 disabled:opacity-60"> </button></div></div> <!></div></div>`),za=x('<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-5"></div>'),Aa=P('<svg class="h-4 w-4 animate-spin" viewBox="0 0 24 24" fill="none"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 0 1 8-8v3a5 5 0 0 0-5 5H4z"></path></svg> Guardando…',1),Fa=x('<div class="mt-4 flex justify-end"><button type="button" class="inline-flex items-center gap-2 rounded-xl bg-slate-900 text-white px-4 py-2 text-sm font-medium shadow hover:bg-slate-800 disabled:opacity-60"><!></button></div>'),qa=x('<section class="mx-auto max-w-7xl px-4 py-6 space-y-6"><header class="flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between"><div class="space-y-1"><h1 class="text-2xl sm:text-3xl font-semibold text-slate-900 tracking-tight">Imágenes de inicio</h1> <p class="text-slate-600 text-sm sm:text-base">Gestiona el slider principal de la página de inicio: títulos, descripciones, orden y estado.</p></div> <div class="flex flex-col items-start sm:items-end gap-1 text-xs text-slate-500"><span class="inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1"><span class="h-1.5 w-1.5 rounded-full bg-emerald-500"></span> <span> </span></span> <button type="button" class="mt-1 inline-flex items-center gap-2 rounded-xl bg-slate-900 text-white px-3 py-1.5 text-xs font-medium shadow hover:bg-black disabled:opacity-60"><!></button></div></header> <div class="rounded-2xl border border-slate-200 bg-white/80 backdrop-blur-sm p-4 sm:p-5 shadow-sm"><div class="flex items-center justify-between gap-3 mb-3"><div><h2 class="text-sm font-semibold text-slate-900">Nueva imagen para el slider</h2> <p class="text-xs text-slate-500 mt-0.5">Sube una imagen grande (ideal 1600×600px) y define el texto que se mostrará sobre el banner.</p></div></div> <div class="mt-2 grid gap-4 md:grid-cols-5"><div class="md:col-span-2 flex flex-col gap-2"><p class="text-xs font-medium text-slate-600">Imagen</p> <div class="flex items-center gap-3"><label class="relative inline-flex cursor-pointer"><input type="file" accept="image/*" class="sr-only"/> <span class="inline-flex items-center gap-2 rounded-xl border border-dashed border-slate-300 bg-slate-50 px-3 py-2 text-xs font-medium text-slate-700 hover:bg-slate-100"><svg class="h-4 w-4" viewBox="0 0 24 24" fill="none"><path d="M12 5v14m0-14L8 9m4-4 4 4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path></svg> Seleccionar archivo</span></label> <!></div> <p class="text-[11px] text-slate-400">Formatos recomendados: JPG o PNG. Peso máximo ~2&nbsp;MB.</p></div> <label class="md:col-span-1"><span class="block text-xs text-slate-600 mb-1">Título</span> <input class="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70" placeholder="Ej: Diseños a medida"/></label> <label class="md:col-span-1"><span class="block text-xs text-slate-600 mb-1">Descripción</span> <input class="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70" placeholder="Texto breve bajo el título"/></label> <label class="md:col-span-1"><span class="block text-xs text-slate-600 mb-1">Orden</span> <input class="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70" type="number" min="0"/> <p class="mt-1 text-[11px] text-slate-400">Menor número → aparece primero.</p></label></div> <div class="mt-4 flex justify-end"><button type="button" class="inline-flex items-center gap-2 rounded-xl bg-amber-600 text-white px-4 py-2 text-sm font-medium shadow hover:bg-amber-700 disabled:opacity-60"><!></button></div></div> <div class="space-y-4"><!></div> <!></section>');function rt(De,Ee){xa(Ee,!1);const xe=v(),he=v();let c=v([]),O=v(!0),R=null,w=v(null),D=v(""),E=v(""),U=v(0),N=v(!1),h=v(new Set),S=v(new Set),_=v(new Set),z=v(!1);ga(B);async function B(){d(O,!0);try{const a=await Ca();d(c,(a||[]).map(t=>({...t,title:t.title??"",caption:t.caption??"",order:Number.isFinite(t.order)?t.order:0})))}catch(a){L(String(a?.message??a))}finally{d(O,!1)}}function Ue(a){const t=a.target,s=t.files?.[0];s&&(R=s,e(w)&&URL.revokeObjectURL(e(w)),d(w,URL.createObjectURL(s)),t.value="")}function _e(){R=null,e(w)&&URL.revokeObjectURL(e(w)),d(w,null)}async function Ne(){if(!R){L("Selecciona una imagen");return}d(N,!0);try{await Ia({file:R,title:e(D),caption:e(E),order:e(U),is_active:!0}),ge("Imagen subida"),_e(),d(D,""),d(E,""),d(U,0),await B()}catch(a){L(String(a?.message??a))}finally{d(N,!1)}}async function ze(a){const t=a.id,s=a.is_active;Q(t,{is_active:!s}),d(h,new Set(e(h)).add(t));try{await Re(t,{is_active:!s})}catch(b){Q(t,{is_active:s}),L(String(b?.message??b))}finally{e(h).delete(t),d(h,new Set(e(h)))}}function Ae(a,t=600){let s=null;return(...b)=>{s&&clearTimeout(s),s=setTimeout(()=>a(...b),t)}}const Fe=Ae(async(a,t)=>{d(S,new Set(e(S)).add(a));try{await Re(a,t)}catch(s){L(String(s?.message??s)),await B()}finally{e(S).delete(a),d(S,new Set(e(S)))}},500);function ye(a,t,s){Q(a,{[t]:s}),Fe(a,{[t]:s})}async function qe(a){const t=a.id;if(confirm("¿Eliminar esta imagen de inicio?")){d(_,new Set(e(_)).add(t));try{await Ma(t),d(c,e(c).filter(s=>s.id!==t)),ge("Eliminada")}catch(s){L(String(s?.message??s))}finally{e(_).delete(t),d(_,new Set(e(_)))}}}async function Je(){if(e(c).length){d(z,!0);try{const a=e(c).map((t,s)=>({id:t.id,order:Number.isFinite(t.order)?Number(t.order):s}));await La(a),ge("Orden guardado"),await B()}catch(a){L(String(a?.message??a))}finally{d(z,!1)}}}function Q(a,t){d(c,e(c).map(s=>s.id===a?{...s,...t}:s))}He(()=>e(c),()=>{d(xe,e(c).length)}),He(()=>e(c),()=>{d(he,e(c).filter(a=>a.is_active).length)}),ha(),ja();var K=qa(),V=i(K),we=o(i(V),2),W=i(we),ke=o(i(W),2),Qe=i(ke);r(ke),r(W);var A=o(W,2),Ke=i(A);{var Ve=a=>{var t=Oa();C(),p(a,t)},We=a=>{var t=Ba();C(),p(a,t)};g(Ke,a=>{e(O)?a(Ve):a(We,!1)})}r(A),r(we),r(V);var X=o(V,2),Y=o(i(X),2),Z=i(Y),Se=o(i(Z),2),$=i(Se),Xe=i($);C(2),r($);var Ye=o($,2);{var Ze=a=>{var t=Ta(),s=i(t),b=o(s,2);r(t),H(()=>fe(s,"src",e(w))),y("click",b,_e),p(a,t)};g(Ye,a=>{e(w)&&a(Ze)})}r(Se),C(2),r(Z);var ee=o(Z,2),je=o(i(ee),2);I(je),r(ee);var ae=o(ee,2),Ce=o(i(ae),2);I(Ce),r(ae);var Ie=o(ae,2),Le=o(i(Ie),2);I(Le),C(2),r(Ie),r(Y);var Me=o(Y,2),F=i(Me),$e=i(F);{var ea=a=>{var t=Ga();C(),p(a,t)},aa=a=>{var t=me("Guardar imagen");p(a,t)};g($e,a=>{e(N)?a(ea):a(aa,!1)})}r(F),r(Me),r(X);var te=o(X,2),ta=i(te);{var sa=a=>{var t=Pa();Pe(t,4,()=>Array(3),ka,(s,b)=>{var T=Ha();p(s,T)}),r(t),p(a,t)},ra=a=>{var t=ya(),s=wa(t);{var b=k=>{var m=Ra();p(k,m)},T=k=>{var m=za();Pe(m,5,()=>e(c),j=>j.id,(j,l,Ja)=>{var se=Na(),re=i(se),le=i(re),Oe=o(le,2),ie=i(Oe),Be=o(i(ie),2),oa=i(Be);r(Be),r(ie);var na=o(ie,2);{var da=n=>{var f=Da();p(n,f)};g(na,n=>{e(l),u(()=>!e(l).is_active)&&n(da)})}r(Oe),r(re);var Te=o(re,2),oe=i(Te),ne=o(i(oe),2);I(ne),r(oe);var de=o(oe,2),ce=o(i(de),2);I(ce),r(de);var pe=o(de,2),ve=i(pe),G=i(ve);I(G);var ca=o(G,4);{var pa=n=>{var f=Ea();p(n,f)},va=n=>{var f=me();H(()=>J(f,(e(l),u(()=>e(l).is_active?"activo":"inactivo")))),p(n,f)};g(ca,n=>{e(h),e(l),u(()=>e(h).has(e(l).id))?n(pa):n(va,!1)})}r(ve);var Ge=o(ve,2),ue=i(Ge);I(ue);var q=o(ue,2),ua=i(q,!0);r(q),r(Ge),r(pe);var ma=o(pe,2);{var ba=n=>{var f=Ua();p(n,f)};g(ma,n=>{e(S),e(l),u(()=>e(S).has(e(l).id))&&n(ba)})}r(Te),r(se),H((n,f,fa)=>{fe(le,"src",(e(l),u(()=>e(l).image))),fe(le,"alt",(e(l),u(()=>e(l).title))),J(oa,`Orden ${e(l),u(()=>e(l).order)??""}`),Sa(G,(e(l),u(()=>e(l).is_active))),G.disabled=n,q.disabled=f,J(ua,fa)},[()=>(e(h),e(l),u(()=>e(h).has(e(l).id))),()=>(e(_),e(l),u(()=>e(_).has(e(l).id))),()=>(e(_),e(l),u(()=>e(_).has(e(l).id)?"Borrando…":"Eliminar"))]),M(ne,()=>e(l).title,n=>(e(l).title=n,be(()=>e(c)))),y("input",ne,n=>ye(e(l).id,"title",n.target.value)),M(ce,()=>e(l).caption,n=>(e(l).caption=n,be(()=>e(c)))),y("input",ce,n=>ye(e(l).id,"caption",n.target.value)),y("change",G,()=>ze(e(l))),M(ue,()=>e(l).order,n=>(e(l).order=n,be(()=>e(c)))),y("click",q,()=>qe(e(l))),p(j,se)}),r(m),p(k,m)};g(s,k=>{e(c),u(()=>!e(c).length)?k(b):k(T,!1)},!0)}p(a,t)};g(ta,a=>{e(O)?a(sa):a(ra,!1)})}r(te);var la=o(te,2);{var ia=a=>{var t=Fa(),s=i(t),b=i(s);{var T=m=>{var j=Aa();C(),p(m,j)},k=m=>{var j=me("Guardar orden");p(m,j)};g(b,m=>{e(z)?m(T):m(k,!1)})}r(s),r(t),H(()=>s.disabled=e(z)),y("click",s,Je),p(a,t)};g(la,a=>{e(c),u(()=>e(c).length)&&a(ia)})}r(K),H(()=>{J(Qe,`${e(he)??""} activas de ${e(xe)??""} imágenes`),A.disabled=e(O),F.disabled=e(N)}),y("click",A,B),y("change",Xe,Ue),M(je,()=>e(D),a=>d(D,a)),M(Ce,()=>e(E),a=>d(E,a)),M(Le,()=>e(U),a=>d(U,a)),y("click",F,Ne),p(De,K),_a()}export{rt as component};
