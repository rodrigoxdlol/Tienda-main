import"../chunks/DsnmJJEf.js";import"../chunks/luk3gl1z.js";import{o as ya}from"../chunks/_gNL4IXV.js";import{p as wa,o as ka,q as Sa,f as x,t as P,d as s,s as r,g as t,b as v,c as Ca,m as j,u as i,e as o,r as e,n as Oe,x as Pa,w as Gt,a as Lt,k as Re,z as ja}from"../chunks/CwLoShKX.js";import{e as tt,s as n}from"../chunks/D8bngpjW.js";import{i as w}from"../chunks/WMMc_YU6.js";import{e as et,i as nt}from"../chunks/ThBeqclG.js";import{s as Na,r as we}from"../chunks/CkmYFb5S.js";import{s as ke}from"../chunks/DIJ89BUl.js";import{b as Se}from"../chunks/DGOQ8hUW.js";import{b as Ea,i as La,s as Aa}from"../chunks/COJT2EDT.js";import{i as Ma}from"../chunks/Ccxz8Bhd.js";import{o as $a,p as Da,q as qa,r as Fa}from"../chunks/Q6rjOpry.js";import{A as za}from"../chunks/BtBNgcIe.js";import{t as It,a as Va}from"../chunks/wZ8Uf4_x.js";var Ta=x('<p class="text-xs text-slate-400">Calculando estadísticas…</p>'),Ba=x('<div class="flex flex-wrap items-center gap-3 text-xs text-slate-500"><span class="inline-flex items-center gap-1"><span class="h-1.5 w-1.5 rounded-full bg-emerald-500"></span> </span> <span class="inline-flex items-center gap-1"><span class="h-1.5 w-1.5 rounded-full bg-sky-500"></span> </span> <span class="inline-flex items-center gap-1"><span class="h-1.5 w-1.5 rounded-full bg-violet-500"></span> </span></div>'),Ga=x('<tr class="border-b last:border-0 border-slate-100"><td class="py-1.5 pr-2"><span><span class="h-1.5 w-1.5 rounded-full bg-current/80"></span> </span></td><td class="py-1.5 text-right text-slate-700"> </td><td class="py-1.5 text-right text-slate-700"> </td></tr>'),Ia=x('<table class="w-full text-xs"><tbody></tbody></table>'),Oa=x('<p class="text-xs text-slate-500">Aún no hay datos de estados.</p>'),Ra=x('<div class="flex items-center justify-between gap-2 text-xs"><div class="flex-1 min-w-0"><p class="truncate text-slate-700"> </p></div> <div class="text-right text-slate-700"> </div></div>'),Ua=x('<div class="space-y-2"></div>'),Ha=x('<p class="text-xs text-slate-500">No hay ventas agrupadas por categoría todavía.</p>'),Wa=x('<div class="flex items-center justify-between gap-2"><div class="flex items-center gap-2 min-w-0"><span class="inline-flex h-5 w-5 items-center justify-center rounded-full bg-slate-100 text-[11px] font-medium text-slate-700"></span> <div class="min-w-0"><p class="truncate text-slate-700"> </p> <p class="text-[11px] text-slate-500"> </p></div></div> <div class="text-right text-slate-700"> </div></div>'),Za=x('<div class="space-y-2 text-xs"></div>'),Ja=x('<p class="text-xs text-slate-500">Aún no hay productos con ventas suficientes.</p>'),Ka=x('<div class="h-9 rounded bg-slate-100 animate-pulse"></div>'),Qa=x('<div class="p-6 space-y-3"></div>'),Xa=x('<div class="p-6"><p class="text-rose-600 text-sm"> </p></div>'),Ya=x('<div class="p-6"><p class="text-slate-600 text-sm">No se encontraron órdenes con esos filtros.</p></div>'),ts=x('<span class="text-[11px] text-slate-400">Guardando…</span>'),es=x('<tr class="hover:bg-slate-50/80"><td class="px-4 py-3 font-mono text-xs text-slate-700"> </td><td class="px-4 py-3 text-slate-700 whitespace-nowrap"> </td><td class="px-4 py-3 text-slate-700 max-w-[220px]"><div class="truncate"> </div></td><td class="px-4 py-3 text-right font-medium text-slate-900"> </td><td class="px-4 py-3"><span><span class="h-1.5 w-1.5 rounded-full bg-current/80"></span> </span></td><td class="px-4 py-3"><div class="flex justify-end items-center gap-2"><button type="button" class="rounded-lg px-2.5 py-1.5 text-xs ring-1 ring-slate-300 text-slate-700 hover:bg-slate-50">Ver detalle</button> <select class="rounded-lg border border-slate-300 px-2 py-1.5 text-xs focus:outline-none focus:ring-2 focus:ring-amber-500/70 bg-white"><option>Pendiente</option><option>Pagada</option><option>En producción</option><option>Lista para retiro</option><option>Entregada</option><option>Cancelada</option></select> <!></div></td></tr>'),as=x('<div class="overflow-x-auto"><table class="min-w-full text-sm"><thead class="bg-slate-50 text-xs uppercase text-slate-500"><tr><th class="px-4 py-3 text-left">N°</th><th class="px-4 py-3 text-left">Fecha</th><th class="px-4 py-3 text-left">Cliente</th><th class="px-4 py-3 text-right">Total</th><th class="px-4 py-3 text-left">Estado</th><th class="px-4 py-3 text-right">Acciones</th></tr></thead><tbody class="divide-y divide-slate-200"></tbody></table></div> <div class="flex items-center justify-between gap-3 px-4 py-3 border-t border-slate-200 text-sm"><div class="text-slate-600"> </div> <div class="flex items-center gap-2"><button class="rounded-lg px-3 py-1.5 ring-1 ring-slate-300 disabled:opacity-50 hover:bg-slate-50">← Anterior</button> <button class="rounded-lg px-3 py-1.5 ring-1 ring-slate-300 disabled:opacity-50 hover:bg-slate-50">Siguiente →</button></div></div>',1),ss=x('<p class="text-xs text-slate-500 mt-0.5"> </p>'),rs=x('<div class="space-y-3"><div class="h-4 rounded bg-slate-100 animate-pulse"></div> <div class="h-4 rounded bg-slate-100 animate-pulse"></div> <div class="h-24 rounded bg-slate-100 animate-pulse"></div></div>'),ls=x('<p class="text-sm text-rose-600">No se pudo cargar el detalle.</p>'),is=x('<p class="text-xs text-slate-500 mt-0.5"> </p>'),ds=x('<div class="border border-slate-200 rounded-xl p-3 bg-slate-50/60"><p class="text-xs font-semibold text-slate-600 mb-1">Dirección</p> <p class="text-slate-700"> </p> <p class="text-xs text-slate-500"> </p></div>'),os=x('<div class="flex items-center justify-between px-3 py-2"><div class="min-w-0"><p class="text-sm text-slate-800 truncate"> </p> <p class="text-xs text-slate-500"> </p></div> <div class="text-sm font-medium text-slate-900"> </div></div>'),ns=x('<p class="px-3 py-3 text-xs text-slate-500">No hay ítems en esta orden.</p>'),vs=x('<p class="text-sm text-slate-700 leading-relaxed"> </p>'),ps=x('<div class="rounded-2xl border border-amber-200 bg-amber-50/50 p-4"><div class="flex items-center gap-2.5 mb-3"><div class="h-8 w-8 rounded-full bg-amber-100 flex items-center justify-center text-amber-600"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div> <div><h3 class="text-sm font-bold text-slate-900">Datos de quien retira</h3> <p class="text-[11px] text-slate-500 font-medium uppercase tracking-wide">Información del cliente</p></div></div> <div class="bg-white rounded-xl border border-amber-100 p-3 shadow-sm"></div></div>'),cs=x('<div class="flex items-start gap-2 bg-white border border-slate-200 rounded-lg p-2 shadow-sm"><div class="mt-0.5 h-1.5 w-1.5 rounded-full bg-emerald-500 shrink-0"></div> <code class="text-xs font-mono text-slate-600 break-all"> </code></div>'),us=x('<div class="rounded-2xl border border-slate-200 bg-slate-50/50 p-4"><div class="flex items-center gap-2.5 mb-3"><div class="h-8 w-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-500"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h3 class="text-sm font-bold text-slate-900">Registro de Pagos</h3> <p class="text-[11px] text-slate-500 font-medium uppercase tracking-wide">Información del sistema</p></div></div> <div class="space-y-2"></div></div>'),xs=x('<div class="mt-6 space-y-4"><!> <!></div>'),_s=x('<div class="space-y-4 text-sm"><div class="flex flex-wrap gap-4 justify-between"><div><p class="text-xs text-slate-500">Cliente</p> <p class="text-slate-800"> </p> <p class="text-xs text-slate-500"> </p> <!></div> <div class="text-right"><p class="text-xs text-slate-500">Fecha</p> <p class="text-slate-800"> </p> <p class="mt-1 text-xs text-slate-500">Estado: <span> </span></p></div></div> <!> <div><p class="text-xs font-semibold text-slate-600 mb-2"> </p> <div class="border border-slate-200 rounded-xl divide-y divide-slate-200"><!></div></div> <div class="flex flex-col items-end gap-1 text-sm"><div class="flex justify-between gap-4 w-full sm:w-1/2"><span class="text-slate-600">Subtotal</span> <span class="font-medium text-slate-800"> </span></div> <div class="flex justify-between gap-4 w-full sm:w-1/2"><span class="text-slate-600">Envío</span> <span class="font-medium text-slate-800"> </span></div> <div class="flex justify-between gap-4 w-full sm:w-1/2 pt-1 border-t border-slate-200 mt-1"><span class="font-semibold text-slate-900">Total</span> <span class="font-semibold text-slate-900"> </span></div></div> <!></div>'),ms=x('<div class="fixed inset-0 z-40 grid place-items-center p-4"><div class="absolute inset-0 bg-black/40"></div> <div class="relative w-full max-w-2xl rounded-2xl bg-white shadow-xl ring-1 ring-black/5 p-5 max-h-[90vh] overflow-auto"><div class="flex items-start justify-between gap-3 mb-3"><div><h2 class="text-lg font-semibold text-slate-900">Detalle de orden</h2> <!></div> <button class="rounded p-1 hover:bg-slate-100" aria-label="Cerrar"><svg class="h-5 w-5 text-slate-500" viewBox="0 0 24 24" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-width="1.5" d="M6 6l12 12M18 6L6 18"></path></svg></button></div> <!></div></div>'),fs=x('<section class="mx-auto max-w-7xl px-4 py-6 space-y-6"><header class="flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between"><div class="space-y-1"><h1 class="text-2xl sm:text-3xl font-semibold text-slate-900 tracking-tight">Órdenes</h1> <p class="text-slate-600 text-sm sm:text-base">Revisa pedidos, cambia estados y ve el detalle de cada compra.</p></div> <div class="flex flex-wrap items-center gap-3 text-xs text-slate-500"><div class="inline-flex items-center gap-1 rounded-full bg-slate-100 px-3 py-1"><span class="h-1.5 w-1.5 rounded-full bg-emerald-500"></span> <span class="font-medium text-slate-800"> </span> <span>mostradas</span></div> <div>de <span class="font-semibold text-slate-800"> </span> órdenes</div></div></header> <div class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm space-y-3"><div class="flex flex-wrap gap-3 items-end"><label class="flex-1 min-w-[200px]"><span class="block text-xs text-slate-600 mb-1">Buscar por email</span> <input type="search" placeholder="cliente@correo.com" class="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70"/></label> <label><span class="block text-xs text-slate-600 mb-1">Estado</span> <select class="rounded-xl border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70"><option>Todos</option><option>Pendiente</option><option>Pagada</option><option>En producción</option><option>Lista para retiro</option><option>Entregada</option><option>Cancelada</option></select></label> <label><span class="block text-xs text-slate-600 mb-1">Desde</span> <input type="date" class="rounded-xl border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70"/></label> <label><span class="block text-xs text-slate-600 mb-1">Hasta</span> <input type="date" class="rounded-xl border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500/70"/></label> <div class="ml-auto flex items-center gap-2"><a class="rounded-xl px-3 py-2 text-sm bg-emerald-600 text-white hover:bg-emerald-700 flex items-center gap-1">⬇️ Exportar CSV</a> <button type="button" class="rounded-xl px-3 py-2 text-sm ring-1 ring-slate-300 hover:bg-slate-50">Limpiar</button> <button type="button" class="rounded-xl px-4 py-2 text-sm bg-slate-900 text-white hover:bg-black">Aplicar</button></div></div> <div class="border-t border-slate-100 pt-3"><header class="flex flex-wrap items-center justify-between gap-3"><div class="flex flex-wrap items-center gap-3 text-xs sm:text-sm text-slate-500"><span class="inline-flex items-center gap-1 rounded-full bg-slate-100 px-3 py-1"><span class="h-1.5 w-1.5 rounded-full bg-amber-500"></span> </span> <span class="inline-flex items-center gap-1 rounded-full bg-slate-100 px-3 py-1"><span class="h-1.5 w-1.5 rounded-full bg-emerald-500"></span> </span></div> <!></header></div></div> <div class="grid gap-4 lg:grid-cols-3"><div class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm"><h3 class="text-sm font-semibold text-slate-800 mb-2">Ventas por estado</h3> <!></div> <div class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm"><h3 class="text-sm font-semibold text-slate-800 mb-2">Ventas por categoría</h3> <!></div> <div class="rounded-2xl border border-slate-200 bg-white p-4 shadow-sm"><h3 class="text-sm font-semibold text-slate-800 mb-2">Productos más vendidos</h3> <!></div></div> <div class="rounded-2xl border border-slate-200 bg-white overflow-hidden shadow-sm"><!></div> <!></section>');function $s(Ue,He){wa(He,!1);const At=j(),B=new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",maximumFractionDigits:0}).format,Ce=`${za}/api/admin/orders/export-csv/`;let Ot=j(!0),bt=j(""),N=j([]),R=j(0),D=j(1);const Pe=15;let G=j("all"),U=j(""),H=j(""),W=j(""),Rt=j(!1),d=j(null),Mt=j(!1),Z=j(new Set),Ut=j(!1),b=j({by_status:[],by_category:[],top_products:[]});ya(()=>{gt(),$t()});function We(){const a=new URLSearchParams;t(G)!=="all"&&a.set("status",t(G)),t(U).trim()&&a.set("email",t(U).trim()),t(H)&&a.set("date_from",t(H)),t(W)&&a.set("date_to",t(W));const l=a.toString();return l?`${Ce}?${l}`:Ce}async function gt(){o(Ot,!0),o(bt,"");try{const a={page:t(D),page_size:Pe,status:t(G)};t(U).trim()&&(a.email=t(U).trim()),t(H)&&(a.date_from=t(H)),t(W)&&(a.date_to=t(W));const l=await $a(a);Array.isArray(l)?(o(N,l),o(R,l.length)):(o(N,l.results??[]),o(R,l.count??t(N).length))}catch(a){o(bt,String(a?.message??a)),o(N,[]),o(R,0),It(t(bt))}finally{o(Ot,!1)}}async function $t(){o(Ut,!0);try{const a={status:t(G)!=="all"?t(G):void 0,email:t(U).trim()||void 0,date_from:t(H)||void 0,date_to:t(W)||void 0},l=await Da(a);o(b,{by_status:(l.by_status??[]).map(c=>({status:c.status,count:c.count??0,total:c.total??0})),by_category:(l.by_category??[]).map(c=>({category:c.name??"Sin categoría",total:c.total??0})),top_products:(l.top_products??[]).map(c=>({product:c.name??"Producto",qty:c.qty??0,total:c.total??0}))})}catch(a){It(String(a?.message??a)),o(b,{by_status:[],by_category:[],top_products:[]})}finally{o(Ut,!1)}}function Ze(){o(D,1),gt(),$t()}function Je(){o(G,"all"),o(U,""),o(H,""),o(W,""),o(D,1),gt(),$t()}async function Ke(a){o(Rt,!0),o(Mt,!0),o(d,null);try{o(d,await qa(a.id))}catch(l){It(String(l?.message??l))}finally{o(Mt,!1)}}function je(){t(Mt)||(o(Rt,!1),o(d,null))}async function Qe(a,l){if(a.status===l)return;let c=`¿Cambiar la orden ${a.number} a estado "${Dt(l)}"?`;if(l==="paid"?c=`¿Marcar la orden ${a.number} como PAGADA?`:l==="cancelled"&&(c=`¿Cancelar la orden ${a.number}?`),!confirm(c))return;const _=new Set(t(Z));_.add(a.id),o(Z,_);const p=a.status;o(N,t(N).map(u=>u.id===a.id?{...u,status:l}:u)),t(d)&&t(d).id===a.id&&o(d,{...t(d),status:l});try{await Fa(a.id,l),Va("Estado actualizado"),$t()}catch(u){o(N,t(N).map(m=>m.id===a.id?{...m,status:p}:m)),t(d)&&t(d).id===a.id&&o(d,{...t(d),status:p}),It(String(u?.message??u))}finally{const u=new Set(t(Z));u.delete(a.id),o(Z,u)}}function Ht(a){return a==="paid"?"bg-emerald-50 text-emerald-700 ring-emerald-200":a==="pending"?"bg-amber-50 text-amber-700 ring-amber-200":a==="in_production"?"bg-sky-50 text-sky-700 ring-sky-200":a==="ready"?"bg-indigo-50 text-indigo-700 ring-indigo-200":a==="delivered"?"bg-slate-900/90 text-white ring-slate-300":a==="cancelled"?"bg-rose-50 text-rose-700 ring-rose-200":"bg-slate-50 text-slate-600 ring-slate-200"}function Dt(a){return a==="paid"?"Pagada":a==="pending"?"Pendiente":a==="in_production"?"En producción":a==="ready"?"Lista para retiro":a==="delivered"?"Entregada":a==="cancelled"?"Cancelada":a}function Xe(a){if(!a)return{user:[],system:[]};const l=a.split(`
`).filter(p=>p.trim()),c=l.filter(p=>!p.startsWith("[MP")),_=l.filter(p=>p.startsWith("[MP"));return{user:c,system:_}}ka(()=>t(R),()=>{o(At,Math.max(1,Math.ceil(t(R)/Pe)))}),Sa(),Ma();var Wt=fs(),Zt=s(Wt),Ne=r(s(Zt),2),Jt=s(Ne),Ee=r(s(Jt),2),Ye=s(Ee,!0);e(Ee),Oe(2),e(Jt);var Le=r(Jt,2),Ae=r(s(Le)),ta=s(Ae,!0);e(Ae),Oe(),e(Le),e(Ne),e(Zt);var Kt=r(Zt,2),Qt=s(Kt),Xt=s(Qt),Me=r(s(Xt),2);we(Me),e(Xt);var Yt=r(Xt,2),te=r(s(Yt),2);P(()=>{t(G),Pa(()=>{})});var ee=s(te);ee.value=ee.__value="all";var ae=r(ee);ae.value=ae.__value="pending";var se=r(ae);se.value=se.__value="paid";var re=r(se);re.value=re.__value="in_production";var le=r(re);le.value=le.__value="ready";var ie=r(le);ie.value=ie.__value="delivered";var $e=r(ie);$e.value=$e.__value="cancelled",e(te),e(Yt);var de=r(Yt,2),De=r(s(de),2);we(De),e(de);var oe=r(de,2),qe=r(s(oe),2);we(qe),e(oe);var Fe=r(oe,2),ze=s(Fe),Ve=r(ze,2),ea=r(Ve,2);e(Fe),e(Qt);var Te=r(Qt,2),Be=s(Te),ne=s(Be),ve=s(ne),aa=r(s(ve));e(ve);var Ge=r(ve,2),sa=r(s(Ge));e(Ge),e(ne);var ra=r(ne,2);{var la=a=>{var l=Ta();v(a,l)},ia=a=>{var l=Ba(),c=s(l),_=r(s(c));e(c);var p=r(c,2),u=r(s(p));e(p);var m=r(p,2),k=r(s(m));e(m),e(l),P(()=>{n(_,` ${t(b),i(()=>t(b).by_status.length)??""} estados`),n(u,` ${t(b),i(()=>t(b).by_category.length)??""} categorías`),n(k,` ${t(b),i(()=>t(b).top_products.length)??""} productos destacados`)}),v(a,l)};w(ra,a=>{t(Ut)?a(la):a(ia,!1)})}e(Be),e(Te),e(Kt);var pe=r(Kt,2),ce=s(pe),da=r(s(ce),2);{var oa=a=>{var l=Ia(),c=s(l);et(c,5,()=>(t(b),i(()=>t(b).by_status)),nt,(_,p)=>{var u=Ga(),m=s(u),k=s(m),L=r(s(k));e(k),e(m);var A=r(m),E=s(A,!0);e(A);var q=r(A),y=s(q,!0);e(q),e(u),P((S,V,J)=>{ke(k,1,S),n(L,` ${V??""}`),n(E,(t(p),i(()=>t(p).count))),n(y,J)},[()=>(t(p),i(()=>`inline-flex items-center gap-1 rounded-full px-2 py-0.5 ring-1 ${Ht(t(p).status)}`)),()=>(t(p),i(()=>Dt(t(p).status))),()=>(t(p),i(()=>B(Number(t(p).total||0))))]),v(_,u)}),e(c),e(l),v(a,l)},na=a=>{var l=Oa();v(a,l)};w(da,a=>{t(b),i(()=>t(b).by_status&&t(b).by_status.length)?a(oa):a(na,!1)})}e(ce);var ue=r(ce,2),va=r(s(ue),2);{var pa=a=>{var l=Ua();et(l,5,()=>(t(b),i(()=>t(b).by_category)),nt,(c,_)=>{var p=Ra(),u=s(p),m=s(u),k=s(m,!0);e(m),e(u);var L=r(u,2),A=s(L,!0);e(L),e(p),P(E=>{n(k,(t(_),i(()=>t(_).category||"Sin categoría"))),n(A,E)},[()=>(t(_),i(()=>B(Number(t(_).total||0))))]),v(c,p)}),e(l),v(a,l)},ca=a=>{var l=Ha();v(a,l)};w(va,a=>{t(b),i(()=>t(b).by_category&&t(b).by_category.length)?a(pa):a(ca,!1)})}e(ue);var Ie=r(ue,2),ua=r(s(Ie),2);{var xa=a=>{var l=Za();et(l,5,()=>(t(b),i(()=>t(b).top_products)),nt,(c,_,p)=>{var u=Wa(),m=s(u),k=s(m);k.textContent=p+1;var L=r(k,2),A=s(L),E=s(A,!0);e(A);var q=r(A,2),y=s(q);e(q),e(L),e(m);var S=r(m,2),V=s(S,!0);e(S),e(u),P(J=>{n(E,(t(_),i(()=>t(_).product||"Producto"))),n(y,`${t(_),i(()=>t(_).qty)??""} unidad(es)`),n(V,J)},[()=>(t(_),i(()=>B(Number(t(_).total||0))))]),v(c,u)}),e(l),v(a,l)},_a=a=>{var l=Ja();v(a,l)};w(ua,a=>{t(b),i(()=>t(b).top_products&&t(b).top_products.length)?a(xa):a(_a,!1)})}e(Ie),e(pe);var xe=r(pe,2),ma=s(xe);{var fa=a=>{var l=Qa();et(l,4,()=>Array(6),nt,(c,_)=>{var p=Ka();v(c,p)}),e(l),v(a,l)},ba=a=>{var l=Gt(),c=Lt(l);{var _=u=>{var m=Xa(),k=s(m),L=s(k,!0);e(k),e(m),P(()=>n(L,t(bt))),v(u,m)},p=u=>{var m=Gt(),k=Lt(m);{var L=E=>{var q=Ya();v(E,q)},A=E=>{var q=as(),y=Lt(q),S=s(y),V=r(s(S));et(V,5,()=>t(N),st=>st.id,(st,f)=>{var rt=es(),yt=s(rt),_e=s(yt);e(yt);var wt=r(yt),qt=s(wt,!0);e(wt);var lt=r(wt),Ft=s(lt),zt=s(Ft,!0);e(Ft),e(lt);var it=r(lt),me=s(it,!0);e(it);var pt=r(it),kt=s(pt),St=r(s(kt));e(kt),e(pt);var ct=r(pt),Vt=s(ct),Ct=s(Vt),F=r(Ct,2),Pt=s(F);Pt.value=Pt.__value="pending";var jt=r(Pt);jt.value=jt.__value="paid";var dt=r(jt);dt.value=dt.__value="in_production";var ot=r(dt);ot.value=ot.__value="ready";var ut=r(ot);ut.value=ut.__value="delivered";var Tt=r(ut);Tt.value=Tt.__value="cancelled",e(F);var xt;La(F);var Bt=r(F,2);{var fe=T=>{var _t=ts();v(T,_t)};w(Bt,T=>{t(Z),t(f),i(()=>t(Z).has(t(f).id))&&T(fe)})}e(Vt),e(ct),e(rt),P((T,_t,be,ge,he)=>{n(_e,`#${t(f),i(()=>t(f).number)??""}`),n(qt,T),n(zt,(t(f),i(()=>t(f).email))),n(me,_t),ke(kt,1,be),n(St,` ${ge??""}`),F.disabled=he,xt!==(xt=(t(f),i(()=>t(f).status)))&&(F.value=(F.__value=(t(f),i(()=>t(f).status)))??"",Aa(F,(t(f),i(()=>t(f).status))))},[()=>(t(f),i(()=>new Date(t(f).created_at).toLocaleString("es-CL",{dateStyle:"short",timeStyle:"short"}))),()=>(t(f),i(()=>B(Number(t(f).total||0)))),()=>(t(f),i(()=>`inline-flex items-center gap-1 rounded-full px-2.5 py-0.5 text-xs font-medium ring-1 ${Ht(t(f).status)}`)),()=>(t(f),i(()=>Dt(t(f).status))),()=>(t(Z),t(f),i(()=>t(Z).has(t(f).id)))]),tt("click",Ct,()=>Ke(t(f))),tt("change",F,T=>Qe(t(f),T.currentTarget.value)),v(st,rt)}),e(V),e(S),e(y);var J=r(y,2),ht=s(J),K=s(ht);e(ht);var Q=r(ht,2),at=s(Q),vt=r(at,2);e(Q),e(J),P(()=>{n(K,`Página ${t(D)??""} de ${t(At)??""}`),at.disabled=t(D)<=1,vt.disabled=t(D)>=t(At)}),tt("click",at,()=>{t(D)>1&&(o(D,t(D)-1),gt())}),tt("click",vt,()=>{t(D)<t(At)&&(o(D,t(D)+1),gt())}),v(E,q)};w(k,E=>{t(N),i(()=>!t(N).length)?E(L):E(A,!1)},!0)}v(u,m)};w(c,u=>{t(bt)?u(_):u(p,!1)},!0)}v(a,l)};w(ma,a=>{t(Ot)?a(fa):a(ba,!1)})}e(xe);var ga=r(xe,2);{var ha=a=>{var l=ms(),c=s(l),_=r(c,2),p=s(_),u=s(p),m=r(s(u),2);{var k=y=>{var S=ss(),V=s(S);e(S),P(()=>n(V,`N° ${t(d),i(()=>t(d).number)??""} · ${t(d),i(()=>t(d).email)??""}`)),v(y,S)};w(m,y=>{t(d)&&y(k)})}e(u);var L=r(u,2);e(p);var A=r(p,2);{var E=y=>{var S=rs();v(y,S)},q=y=>{var S=Gt(),V=Lt(S);{var J=K=>{var Q=ls();v(K,Q)},ht=K=>{var Q=_s(),at=s(Q),vt=s(at),st=r(s(vt),2),f=s(st,!0);e(st);var rt=r(st,2),yt=s(rt,!0);e(rt);var _e=r(rt,2);{var wt=h=>{var g=is(),M=s(g);e(g),P(()=>n(M,`Tel: ${t(d),i(()=>t(d).phone)??""}`)),v(h,g)};w(_e,h=>{t(d),i(()=>t(d).phone)&&h(wt)})}e(vt);var qt=r(vt,2),lt=r(s(qt),2),Ft=s(lt,!0);e(lt);var zt=r(lt,2),it=r(s(zt)),me=s(it,!0);e(it),e(zt),e(qt),e(at);var pt=r(at,2);{var kt=h=>{var g=ds(),M=r(s(g),2),X=s(M,!0);e(M);var C=r(M,2),I=s(C);e(C),e(g),P(()=>{n(X,(t(d),i(()=>t(d).address||"—"))),n(I,`${t(d),i(()=>t(d).city||"")??""} ${t(d),i(()=>t(d).region?`· ${t(d).region}`:"")??""}`)}),v(h,g)};w(pt,h=>{t(d),i(()=>t(d).address||t(d).city||t(d).region)&&h(kt)})}var St=r(pt,2),ct=s(St),Vt=s(ct);e(ct);var Ct=r(ct,2),F=s(Ct);{var Pt=h=>{var g=Gt(),M=Lt(g);et(M,1,()=>(t(d),i(()=>t(d).items)),nt,(X,C)=>{var I=os(),Nt=s(I),$=s(Nt),z=s($,!0);e($);var Y=r($,2),Et=s(Y);e(Y),e(Nt);var mt=r(Nt,2),O=s(mt,!0);e(mt),e(I),P((ft,ye)=>{n(z,(t(C),i(()=>t(C).product_name||`Producto #${t(C).product}`))),n(Et,`${t(C),i(()=>t(C).qty)??""} x ${ft??""}`),n(O,ye)},[()=>(t(C),i(()=>B(Number(t(C).unit_price||0)))),()=>(t(C),i(()=>B(Number(t(C).subtotal||0))))]),v(X,I)}),v(h,g)},jt=h=>{var g=ns();v(h,g)};w(F,h=>{t(d),i(()=>t(d).items?.length)?h(Pt):h(jt,!1)})}e(Ct),e(St);var dt=r(St,2),ot=s(dt),ut=r(s(ot),2),Tt=s(ut,!0);e(ut),e(ot);var xt=r(ot,2),Bt=r(s(xt),2),fe=s(Bt,!0);e(Bt),e(xt);var T=r(xt,2),_t=r(s(T),2),be=s(_t,!0);e(_t),e(T),e(dt);var ge=r(dt,2);{var he=h=>{const g=ja(()=>{const{user:$,system:z}=(t(d),i(()=>Xe(t(d).notes)));return{user:$,system:z}});var M=xs(),X=s(M);{var C=$=>{var z=ps(),Y=r(s(z),2);et(Y,5,()=>t(g).user,nt,(Et,mt)=>{var O=vs(),ft=s(O,!0);e(O),P(()=>n(ft,t(mt))),v(Et,O)}),e(Y),e(z),v($,z)};w(X,$=>{Re(t(g).user),i(()=>t(g).user.length>0)&&$(C)})}var I=r(X,2);{var Nt=$=>{var z=us(),Y=r(s(z),2);et(Y,5,()=>t(g).system,nt,(Et,mt)=>{var O=cs(),ft=r(s(O),2),ye=s(ft,!0);e(ft),e(O),P(()=>n(ye,t(mt))),v(Et,O)}),e(Y),e(z),v($,z)};w(I,$=>{Re(t(g).system),i(()=>t(g).system.length>0)&&$(Nt)})}e(M),v(h,M)};w(ge,h=>{t(d),i(()=>t(d).notes)&&h(he)})}e(Q),P((h,g,M,X,C,I)=>{n(f,(t(d),i(()=>t(d).full_name||"-"))),n(yt,(t(d),i(()=>t(d).email))),n(Ft,h),ke(it,1,g),n(me,M),n(Vt,`Ítems (${t(d),i(()=>t(d).items?.length||0)??""})`),n(Tt,X),n(fe,C),n(be,I)},[()=>(t(d),i(()=>new Date(t(d).created_at).toLocaleString("es-CL",{dateStyle:"short",timeStyle:"short"}))),()=>(t(d),i(()=>`ml-1 inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[11px] ring-1 ${Ht(t(d).status)}`)),()=>(t(d),i(()=>Dt(t(d).status))),()=>(t(d),i(()=>B(Number(t(d).subtotal||0)))),()=>(t(d),i(()=>B(Number(t(d).shipping||0)))),()=>(t(d),i(()=>B(Number(t(d).total||0))))]),v(K,Q)};w(V,K=>{t(d)?K(ht,!1):K(J)},!0)}v(y,S)};w(A,y=>{t(Mt)?y(E):y(q,!1)})}e(_),e(l),tt("click",c,je),tt("click",L,je),v(a,l)};w(ga,a=>{t(Rt)&&a(ha)})}e(Wt),P((a,l)=>{n(Ye,(t(N),i(()=>t(N).length))),n(ta,t(R)),Na(ze,"href",a),n(aa,` ${t(R)??""} orden${t(R)===1?"":"es"} totales`),n(sa,` ${l??""} pagadas en esta página`)},[()=>i(We),()=>(t(N),i(()=>t(N).filter(a=>a.status==="paid").length))]),Se(Me,()=>t(U),a=>o(U,a)),Ea(te,()=>t(G),a=>o(G,a)),Se(De,()=>t(H),a=>o(H,a)),Se(qe,()=>t(W),a=>o(W,a)),tt("click",Ve,Je),tt("click",ea,Ze),v(Ue,Wt),Ca()}export{$s as component};
